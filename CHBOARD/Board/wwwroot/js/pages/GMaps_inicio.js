var GMaps_map; // Google maps - Mapa general
var GMaps_update_thread;

// URLs por defecto, si fallan las URL dinámicas, carga estas
var GMaps_marcador_verde = "https://cartelux.uy/SW_Markers_green_sm.png";
var GMaps_marcador_amarillo = "https://cartelux.uy/SW_Markers_yellow_sm.png";
var GMaps_marcador_verde_inicio = "https://cartelux.uy/SW_Markers_green_sm_inicio.png";
var GMaps_marcador_verde_fin = "https://cartelux.uy/SW_Markers_green_sm_fin.png";
var GMaps_marcador_rojo = "https://cartelux.uy/SW_Markers_red_sm.png";
var GMaps_marcador_rojo_inicio = "https://cartelux.uy/SW_Markers_red_sm_inicio.png";
var GMaps_marcador_rojo_fin = "https://cartelux.uy/SW_Markers_red_sm_fin.png";
var GMaps_marcador_seleccionado = "https://cartelux.uy/SW_Markers_selection_sm.png";
var GMaps_marcador_antena = "https://cartelux.uy/SW_Markers_antena.png";

// URLs dinámicas
var GMaps_marcador_verde_URL = "https://cartelux.uy/chevaca_img/SW_Marcador_verde_";
var GMaps_marcador_rojo_URL = "https://cartelux.uy/chevaca_img/SW_Marcador_rojo_";
var GMaps_marcador_amarillo_URL = "https://cartelux.uy/chevaca_img/SW_Marcador_amarillo_";

// Perímetros de los campos y las zonas
// Crear polígonos en mapas: http://apps.headwallphotonics.com/
var GMaps_campo_taladro = [{ lat: -32.22872386481253, lng: -54.15154802896079 }, { lat: -32.22892353220333, lng: -54.15133881665763 }, { lat: -32.229041517273544, lng: -54.15148902036246 }, { lat: -32.22911866127508, lng: -54.15131199456748 }, { lat: -32.2290460551578, lng: -54.15122079946097 }, { lat: -32.2291095855136, lng: -54.15111351110038 }, { lat: -32.22920488096403, lng: -54.151177884116734 }, { lat: -32.22927294908173, lng: -54.15107596017417 }, { lat: -32.22921849459164, lng: -54.15096330739554 }, { lat: -32.22930017631453, lng: -54.1508291969448 }, { lat: -32.2294998424392, lng: -54.150641442313756 }, { lat: -32.22965866745236, lng: -54.15077018834647 }, { lat: -32.22971312167873, lng: -54.150630713477696 }, { lat: -32.229681356717315, lng: -54.15055024720725 }, { lat: -32.229855788730774, lng: -54.150484778979546 }, { lat: -32.23001007528599, lng: -54.15044186363531 }, { lat: -32.230150748093344, lng: -54.15042040596319 }, { lat: -32.23025058027615, lng: -54.15040967712713 }, { lat: -32.230291420682946, lng: -54.150280931094414 }, { lat: -32.23036856362351, lng: -54.150270202258355 }, { lat: -32.230577303016695, lng: -54.150291659930474 }, { lat: -32.230699823741574, lng: -54.15031311760259 }, { lat: -32.23079965532119, lng: -54.15021655807806 }, { lat: -32.23098819941166, lng: -54.150291659930474 }, { lat: -32.231137946264774, lng: -54.15031848202062 }, { lat: -32.23121962626246, lng: -54.150248744586236 }, { lat: -32.231196937381576, lng: -54.150039532283074 }, { lat: -32.231437439230696, lng: -54.149733760455376 }, { lat: -32.23175054445791, lng: -54.14961037884069 }, { lat: -32.23199558257886, lng: -54.14958892116857 }, { lat: -32.23229961044006, lng: -54.14947626838995 }, { lat: -32.23224515776358, lng: -54.149277784922845 }, { lat: -32.23232229904562, lng: -54.14922414074255 }, { lat: -32.232458430560094, lng: -54.14908466587377 }, { lat: -32.23274884377599, lng: -54.14883253822637 }, { lat: -32.23296211539033, lng: -54.148735978701836 }, { lat: -32.23308917058224, lng: -54.148553588488824 }, { lat: -32.23348394808065, lng: -54.14838192711187 }, { lat: -32.23368814266544, lng: -54.14836046943975 }, { lat: -32.23383334742434, lng: -54.14820490131689 }, { lat: -32.23402392831826, lng: -54.14807079086614 }, { lat: -32.23414190676655, lng: -54.14807079086614 }, { lat: -32.234305261288235, lng: -54.14810297737432 }, { lat: -32.23441416413954, lng: -54.14808688412023 }, { lat: -32.23458659338715, lng: -54.148022511103875 }, { lat: -32.23478624789664, lng: -54.14795277366949 }, { lat: -32.23496775161549, lng: -54.14791522274328 }, { lat: -32.235058503338955, lng: -54.14787767181707 }, { lat: -32.23519463075418, lng: -54.147738196948296 }, { lat: -32.23534890824489, lng: -54.14758799324346 }, { lat: -32.23550772303524, lng: -54.147528984645135 }, { lat: -32.2356302371124, lng: -54.14759872207952 }, { lat: -32.23587980231414, lng: -54.147539713481194 }, { lat: -32.23603407864144, lng: -54.147602541722264 }, { lat: -32.23612029176908, lng: -54.1474469735994 }, { lat: -32.23583442687389, lng: -54.147345049656835 }, { lat: -32.23544419715241, lng: -54.14721093920609 }, { lat: -32.23527176953229, lng: -54.146872980870214 }, { lat: -32.23524908166317, lng: -54.14666376856705 }, { lat: -32.23519009317696, lng: -54.14646528509995 }, { lat: -32.23513564223262, lng: -54.14628825930497 }, { lat: -32.235117491910586, lng: -54.14616487769028 }, { lat: -32.235117491910586, lng: -54.14600930956742 }, { lat: -32.23518555559951, lng: -54.145805461682286 }, { lat: -32.23514925497176, lng: -54.14550505427262 }, { lat: -32.23509026642075, lng: -54.14544068125626 }, { lat: -32.234985797613184, lng: -54.14549567503869 }, { lat: -32.234924540160776, lng: -54.14545812411248 }, { lat: -32.234854207479295, lng: -54.145345471333854 }, { lat: -32.23470219794949, lng: -54.14522208971917 }, { lat: -32.234636402701, lng: -54.145171127747886 }, { lat: -32.234602370657235, lng: -54.145061157178276 }, { lat: -32.234602370657235, lng: -54.14483316941201 }, { lat: -32.23464774671277, lng: -54.14475538535058 }, { lat: -32.234574478668925, lng: -54.144724724394926 }, { lat: -32.234474651236354, lng: -54.14468717346872 }, { lat: -32.234436081517124, lng: -54.144646940333494 }, { lat: -32.23448599526831, lng: -54.14450746546472 }, { lat: -32.23445423197527, lng: -54.14445650349344 }, { lat: -32.23437936131204, lng: -54.14443504582132 }, { lat: -32.234270458419026, lng: -54.14452892313684 }, { lat: -32.23423415742568, lng: -54.14444845686639 }, { lat: -32.23427726485367, lng: -54.14439213047708 }, { lat: -32.23429768415451, lng: -54.14430898199762 }, { lat: -32.234193318790844, lng: -54.14415073166574 }, { lat: -32.234113586363726, lng: -54.144139619891696 }, { lat: -32.23405005950618, lng: -54.14400014502292 }, { lat: -32.23397518850991, lng: -54.14392772537952 }, { lat: -32.233888973346886, lng: -54.143914314334445 }, { lat: -32.23377553221827, lng: -54.1438526235271 }, { lat: -32.233601611905655, lng: -54.14376411062961 }, { lat: -32.23346321327205, lng: -54.14374801737552 }, { lat: -32.23337472878927, lng: -54.143667551105075 }, { lat: -32.23321591027075, lng: -54.14361390692478 }, { lat: -32.23291428834032, lng: -54.143459308050616 }, { lat: -32.232814459083805, lng: -54.14346199025963 }, { lat: -32.23271916741845, lng: -54.143486130140765 }, { lat: -32.23246278696557, lng: -54.143529045485 }, { lat: -32.23241740981892, lng: -54.1435639142022 }, { lat: -32.23240606552871, lng: -54.14366852035378 }, { lat: -32.23236749493142, lng: -54.14366315593575 }, { lat: -32.23234707519682, lng: -54.14362560500954 }, { lat: -32.232349344056445, lng: -54.14359878291939 }, { lat: -32.23230396685316, lng: -54.14359878291939 }, { lat: -32.23226085848902, lng: -54.14367388477181 }, { lat: -32.23223590100571, lng: -54.14365779151772 }, { lat: -32.23223136328074, lng: -54.143601465128405 }, { lat: -32.2320611984306, lng: -54.143529045485 }, { lat: -32.23201355221545, lng: -54.14353977432106 }, { lat: -32.23200447674308, lng: -54.14346735467766 }, { lat: -32.231963637106126, lng: -54.1433305620179 }, { lat: -32.23197709932582, lng: -54.14324512904009 }, { lat: -32.23195663527353, lng: -54.14317796923925 }, { lat: -32.231911257874124, lng: -54.143062634251606 }, { lat: -32.231890838036996, lng: -54.14298216798116 }, { lat: -32.231908989003564, lng: -54.14292852380086 }, { lat: -32.23185680496492, lng: -54.14285073973943 }, { lat: -32.231845460604745, lng: -54.14273540475179 }, { lat: -32.23183638511557, lng: -54.14264152743627 }, { lat: -32.231791007656106, lng: -54.14258251883794 }, { lat: -32.231704790420736, lng: -54.142585201046955 }, { lat: -32.2316548751418, lng: -54.14255569674779 }, { lat: -32.231641261879155, lng: -54.142502052567494 }, { lat: -32.23165260626485, lng: -54.14245109059621 }, { lat: -32.23151874242356, lng: -54.142338437817585 }, { lat: -32.231480171449654, lng: -54.14225260712911 }, { lat: -32.23138487838511, lng: -54.14216945864965 }, { lat: -32.23126916524378, lng: -54.14216677644063 }, { lat: -32.231203367509494, lng: -54.142102403424275 }, { lat: -32.2311965608446, lng: -54.14204607703496 }, { lat: -32.23113530083768, lng: -54.142008526108754 }, { lat: -32.23106950300646, lng: -54.14204607703496 }, { lat: -32.23099009176739, lng: -54.14204339482595 }, { lat: -32.23092429383104, lng: -54.14219896294881 }, { lat: -32.230874378123396, lng: -54.14218555190374 }, { lat: -32.230840344670646, lng: -54.142102403424275 }, { lat: -32.23080404230701, lng: -54.1420165727358 }, { lat: -32.23061120509151, lng: -54.141756398461354 }, { lat: -32.23040927250054, lng: -54.141745669625294 }, { lat: -32.23031851613375, lng: -54.14176176287938 }, { lat: -32.23020733946089, lng: -54.141713483117115 }, { lat: -32.23015969227375, lng: -54.14173762299825 }, { lat: -32.230050784323616, lng: -54.14176176287938 }, { lat: -32.22994868300183, lng: -54.141818089268696 }, { lat: -32.22992826272372, lng: -54.14177517392446 }, { lat: -32.22986700186181, lng: -54.141812724850666 }, { lat: -32.22968095010215, lng: -54.141850275776875 }, { lat: -32.228596396897224, lng: -54.14142916896154 }, { lat: -32.22850563872002, lng: -54.141482813141835 }, { lat: -32.2284557216839, lng: -54.1415310929041 }, { lat: -32.228315046252845, lng: -54.141509635231984 }, { lat: -32.22828781872489, lng: -54.14139698245336 }, { lat: -32.228215211943855, lng: -54.14131115176488 }, { lat: -32.22810630166352, lng: -54.141219956658375 }, { lat: -32.22792024629937, lng: -54.14112876155187 }, { lat: -32.22776141824814, lng: -54.14106975295354 }, { lat: -32.227588976049674, lng: -54.14110730387975 }, { lat: -32.22754813442844, lng: -54.14104293086339 }, { lat: -32.22746191316777, lng: -54.14106438853551 }, { lat: -32.22726678053897, lng: -54.14110193946172 }, { lat: -32.227219178052465, lng: -54.14112734508027 }, { lat: -32.22692617114122, lng: -54.14107370089997 }, { lat: -32.226592913800246, lng: -54.141003181907166 }, { lat: -32.225888525195664, lng: -54.14086102482938 }, { lat: -32.2250329527309, lng: -54.14068436632373 }, { lat: -32.22471528625991, lng: -54.14061194668033 }, { lat: -32.22468351955175, lng: -54.14064949760654 }, { lat: -32.22467898144968, lng: -54.140767514803194 }, { lat: -32.224644945676914, lng: -54.140856027700686 }, { lat: -32.22461771704953, lng: -54.14091235409 }, { lat: -32.22462452420715, lng: -54.14100086698749 }, { lat: -32.224760667252305, lng: -54.141019642450594 }, { lat: -32.22474024580854, lng: -54.14107865104892 }, { lat: -32.22475159105564, lng: -54.14129859218814 }, { lat: -32.2247810886915, lng: -54.1414353848479 }, { lat: -32.22485823630925, lng: -54.14148366461017 }, { lat: -32.224835545840236, lng: -54.14152657995441 }, { lat: -32.22482646965104, lng: -54.14164727936008 }, { lat: -32.22482873869843, lng: -54.14175188551166 }, { lat: -32.224803779174096, lng: -54.14188331375339 }, { lat: -32.22473797675895, lng: -54.142132759191774 }, { lat: -32.224654021884234, lng: -54.14228832731464 }, { lat: -32.224654021884234, lng: -54.14257800588825 }, { lat: -32.224663098090645, lng: -54.14272820959308 }, { lat: -32.224572335985776, lng: -54.142873048879885 }, { lat: -32.22403229958794, lng: -54.143339753248476 }, { lat: -32.223832621451905, lng: -54.14344167719104 }, { lat: -32.22377362555503, lng: -54.143650889494204 }, { lat: -32.224558620812125, lng: -54.14434571695921 }, { lat: -32.22517126335375, lng: -54.14488215876219 }, { lat: -32.225910966993915, lng: -54.14561708403227 }, { lat: -32.22641015009755, lng: -54.14603550863859 }, { lat: -32.22657351851785, lng: -54.14630909395811 }, { lat: -32.22679134262149, lng: -54.147199587351054 }, { lat: -32.227508343275304, lng: -54.14999444914457 }, { lat: -32.22760817836076, lng: -54.15020366144773 }, { lat: -32.228197788789686, lng: -54.15088657404033 }, { lat: -32.228388703430426, lng: -54.151137070184916 }];
var GMaps_casa_pablo = [{ lng: -56.1909381, lat: -34.867696 }, { lng: -56.1912761, lat: -34.8685762 }, { lng: -56.1901871, lat: -34.8688271 }, { lng: -56.1898652, lat: -34.86796 }, { lng: -56.1909381, lat: -34.867696 }];
var GMaps_casa_gonzalo = [{ lng: -56.159980146370884, lat: -34.91496475103657 }, { lng: -56.159832624875065, lat: -34.91454246172067 }, { lng: -56.15875974126911, lat: -34.914452285074844 }, { lng: -56.15866049953556, lat: -34.915402434024415 }, { lng: -56.15943565794086, lat: -34.91549260962643 }];
var GMaps_ciudad_melo = [{ lat: -32.3690208943381, lng: -54.183649621007156 }, { lat: -32.36896652374451, lng: -54.182941517827224 }, { lat: -32.36922025290143, lng: -54.18176134586067 }, { lat: -32.3678156718415, lng: -54.1815682268116 }, { lat: -32.367213054567294, lng: -54.177920422551345 }, { lat: -32.36679167318444, lng: -54.176450572011184 }, { lat: -32.366592309264995, lng: -54.17601068973274 }, { lat: -32.366773549209924, lng: -54.17586048602791 }, { lat: -32.3656498556942, lng: -54.17437990665169 }, { lat: -32.36294930932135, lng: -54.17234142780037 }, { lat: -32.361916193068296, lng: -54.171204171178054 }, { lat: -32.36168056841005, lng: -54.170474610326 }, { lat: -32.36104619127814, lng: -54.17034586429329 }, { lat: -32.3604480601915, lng: -54.16882236957283 }, { lat: -32.35894365239229, lng: -54.16854341983528 }, { lat: -32.35580787857565, lng: -54.16824301242561 }, { lat: -32.34984417056332, lng: -54.1685648775074 }, { lat: -32.34971879340441, lng: -54.16852084052172 }, { lat: -32.34945594579818, lng: -54.16506615531054 }, { lat: -32.349537519274946, lng: -54.16385379683581 }, { lat: -32.349474073243826, lng: -54.1631135071477 }, { lat: -32.349619092678175, lng: -54.16263070952502 }, { lat: -32.34987287612885, lng: -54.161750944968134 }, { lat: -32.35068860382661, lng: -54.15876832854357 }, { lat: -32.35217502204937, lng: -54.15453043830004 }, { lat: -32.35581845607802, lng: -54.15628996741381 }, { lat: -32.36016863280971, lng: -54.15562477957812 }, { lat: -32.36085739160186, lng: -54.15465918433276 }, { lat: -32.36009613157902, lng: -54.15240612876025 }, { lat: -32.35986050217783, lng: -54.15109721076098 }, { lat: -32.35980612607498, lng: -54.14792147528735 }, { lat: -32.35957049591808, lng: -54.14631214987841 }, { lat: -32.36265176486852, lng: -54.14157000434008 }, { lat: -32.363286130735496, lng: -54.140003594275385 }, { lat: -32.36473609314619, lng: -54.137020977850824 }, { lat: -32.36689286920939, lng: -54.136269959326654 }, { lat: -32.368161536974846, lng: -54.1360982979497 }, { lat: -32.36919458186024, lng: -54.13603392493334 }, { lat: -32.37037260109354, lng: -54.136227043982416 }, { lat: -32.37207617098282, lng: -54.13633433234301 }, { lat: -32.375773169645534, lng: -54.13691368949023 }, { lat: -32.37890825098015, lng: -54.137278469916254 }, { lat: -32.37963310979502, lng: -54.14137688529101 }, { lat: -32.380158628799585, lng: -54.14393034827319 }, { lat: -32.38048481147195, lng: -54.144702824469476 }, { lat: -32.38289490249979, lng: -54.144466790076166 }, { lat: -32.383239195969765, lng: -54.144016178961664 }, { lat: -32.38410898415468, lng: -54.1425999726018 }, { lat: -32.384435152565025, lng: -54.14184895407763 }, { lat: -32.38401838160947, lng: -54.14133396994677 }, { lat: -32.384435152565025, lng: -54.140497120734125 }, { lat: -32.38740685494786, lng: -54.14302912604418 }, { lat: -32.38527774884109, lng: -54.14832917105761 }, { lat: -32.38523244816595, lng: -54.14886561286059 }, { lat: -32.38227692798627, lng: -54.15407982718554 }, { lat: -32.38600974955609, lng: -54.153253706808954 }, { lat: -32.386317791048455, lng: -54.15402618300524 }, { lat: -32.384179599030126, lng: -54.15451970946398 }, { lat: -32.38407087604997, lng: -54.15630069624987 }, { lat: -32.38528494190096, lng: -54.15642944228259 }, { lat: -32.387078830231964, lng: -54.15559259306994 }, { lat: -32.38745934741928, lng: -54.15660110365954 }, { lat: -32.385647346455464, lng: -54.15752378356066 }, { lat: -32.38579230787015, lng: -54.15878978621569 }, { lat: -32.38648087141327, lng: -54.160248907919794 }, { lat: -32.38925319256819, lng: -54.160248907919794 }, { lat: -32.38952498417984, lng: -54.161471995230585 }, { lat: -32.38954310359154, lng: -54.16415420424548 }, { lat: -32.389398148196186, lng: -54.166214140768915 }, { lat: -32.388184137627235, lng: -54.1665360058507 }, { lat: -32.386263430861426, lng: -54.16780200850573 }, { lat: -32.38147569126814, lng: -54.174231438237165 }, { lat: -32.37795818582537, lng: -54.17602994674301 }, { lat: -32.377140746523295, lng: -54.17716326741318 }, { lat: -32.377140746523295, lng: -54.17714180974106 }, { lat: -32.376932344461366, lng: -54.17835416821579 }, { lat: -32.37589032694235, lng: -54.17980256108383 }, { lat: -32.37489360328963, lng: -54.18086471585373 }, { lat: -32.37409621645233, lng: -54.181476259509125 }, { lat: -32.37315384111944, lng: -54.181712293902436 }, { lat: -32.373117386947946, lng: -54.181769106790206 }];

var Estancia_taladro_estanque1 = [{ lat: -32.228971472059754, lng: -54.145304689514376 }, { lat: -32.22905816052847, lng: -54.14531246335323 }, { lat: -32.229167303987886, lng: -54.14532171469068 }, { lat: -32.22924468220224, lng: -54.14534705928225 }, { lat: -32.22926113199481, lng: -54.14521294883151 }, { lat: -32.2292276651723, lng: -54.14511638930697 }, { lat: -32.22913293698075, lng: -54.14502787640948 }, { lat: -32.22908812540661, lng: -54.144998372110315 }, { lat: -32.229007109324314, lng: -54.145124708722186 }];
var Estancia_taladro_estanque2 = [{ lat: -32.227050105964246, lng: -54.14256563731077 }, { lat: -32.2269366562984, lng: -54.14254149742963 }, { lat: -32.22687993141238, lng: -54.14245298453214 }, { lat: -32.22678009552699, lng: -54.14233228512647 }, { lat: -32.226702949540446, lng: -54.14221695013883 }, { lat: -32.22668706653508, lng: -54.14209088631513 }, { lat: -32.226736984542576, lng: -54.14207211085203 }, { lat: -32.22677782652833, lng: -54.14205601759794 }, { lat: -32.22683682047531, lng: -54.14206138201597 }, { lat: -32.22691510084588, lng: -54.142089545210624 }, { lat: -32.227029685034836, lng: -54.14210161515119 }, { lat: -32.227329191539546, lng: -54.14219012804868 }, { lat: -32.22751751709393, lng: -54.14230814524534 }, { lat: -32.22746533053359, lng: -54.14238056488874 }, { lat: -32.22738818512868, lng: -54.14242079802396 }, { lat: -32.227360957323064, lng: -54.142471759995246 }, { lat: -32.227315577628936, lng: -54.14250126429441 }, { lat: -32.227279273857306, lng: -54.14251601644399 }, { lat: -32.22722481817268, lng: -54.14259514160993 }, { lat: -32.22718057290489, lng: -54.14256295510175 }, { lat: -32.227118175695786, lng: -54.1425361330116 }, { lat: -32.227143134584566, lng: -54.14256831951978 }];
var Estancia_taladro_estanque3 = [{ lat: -32.2315100570262, lng: -54.149676755849406 }, { lat: -32.23178686003217, lng: -54.14953728098063 }, { lat: -32.23170971829558, lng: -54.14952655214457 }, { lat: -32.23177551566326, lng: -54.14947559017329 }, { lat: -32.23183450636618, lng: -54.14943803924708 }, { lat: -32.231734675923406, lng: -54.14944876808314 }, { lat: -32.231829968621156, lng: -54.14937098402171 }, { lat: -32.23192753008913, lng: -54.14931197542338 }, { lat: -32.23202509145237, lng: -54.14923419136195 }, { lat: -32.23210223292124, lng: -54.149073258821055 }, { lat: -32.232197525233545, lng: -54.149188593808695 }, { lat: -32.232326850354696, lng: -54.14920200485377 }, { lat: -32.23235407667255, lng: -54.14925296682505 }, { lat: -32.23227920427884, lng: -54.14931197542338 }, { lat: -32.232290548584885, lng: -54.14940317052989 }, { lat: -32.232272397694544, lng: -54.1495131410995 }, { lat: -32.23222928931544, lng: -54.149446085874125 }, { lat: -32.23218164318844, lng: -54.14947022575526 }, { lat: -32.232020553716865, lng: -54.14949209364945 }, { lat: -32.23194341217866, lng: -54.14955378445679 }, { lat: -32.23184811959987, lng: -54.14954305562073 }, { lat: -32.231714256046615, lng: -54.14961815747315 }];
var Estancia_taladro_bosque1 = [{ lat: -32.22848993837537, lng: -54.14482372909001 }, { lat: -32.22846938739809, lng: -54.144781635699715 }, { lat: -32.22844442887351, lng: -54.1447253093104 }, { lat: -32.22845350470143, lng: -54.14466898292109 }, { lat: -32.228458042615046, lng: -54.14460729211375 }, { lat: -32.22848073217975, lng: -54.14457778781458 }, { lat: -32.22850342173875, lng: -54.144508050380196 }, { lat: -32.22853291815701, lng: -54.144502685962166 }, { lat: -32.228526111292105, lng: -54.14447049945399 }, { lat: -32.228507959649875, lng: -54.14447586387202 }, { lat: -32.22847392531092, lng: -54.14441149085566 }, { lat: -32.2284671184416, lng: -54.14435248225733 }, { lat: -32.228528380247134, lng: -54.14433907121226 }, { lat: -32.22854199397609, lng: -54.144304202495064 }, { lat: -32.22851022860535, lng: -54.14424251168772 }, { lat: -32.22847392531092, lng: -54.14422373622462 }, { lat: -32.22847392531092, lng: -54.144167409835305 }, { lat: -32.22851022860535, lng: -54.14411108344599 }, { lat: -32.228499712366045, lng: -54.144043794620224 }, { lat: -32.22854962937799, lng: -54.1439499173047 }, { lat: -32.22850651923292, lng: -54.14392845963258 }, { lat: -32.22848609863075, lng: -54.1438774976613 }, { lat: -32.22847702280609, lng: -54.14381044243593 }, { lat: -32.22853374669534, lng: -54.14379434918184 }, { lat: -32.228581394734945, lng: -54.14379971359987 }, { lat: -32.228706187101245, lng: -54.143864086616226 }, { lat: -32.228744759252514, lng: -54.143853357780166 }, { lat: -32.22880115181233, lng: -54.143826477557894 }, { lat: -32.228896447586166, lng: -54.14364140513587 }, { lat: -32.22897586065471, lng: -54.14360117200064 }, { lat: -32.229062080479125, lng: -54.14347242596793 }, { lat: -32.22910065247935, lng: -54.143421463996646 }, { lat: -32.22913014870378, lng: -54.14335440877127 }, { lat: -32.22915017881268, lng: -54.14322298052954 }, { lat: -32.22921597803355, lng: -54.14318274739432 }, { lat: -32.229247743157615, lng: -54.14311032775092 }, { lat: -32.229234129534376, lng: -54.14300572159934 }, { lat: -32.229290852951074, lng: -54.142949395210024 }, { lat: -32.229422451141474, lng: -54.142911844283816 }, { lat: -32.229404299678265, lng: -54.14280455592322 }, { lat: -32.2293339627241, lng: -54.14273481848883 }, { lat: -32.229256818905306, lng: -54.142670445472476 }, { lat: -32.229170599265636, lng: -54.14260070803809 }, { lat: -32.22903495695724, lng: -54.14259685756365 }, { lat: -32.228982771268235, lng: -54.142658548370996 }, { lat: -32.22893966132863, lng: -54.14260758639971 }, { lat: -32.22890108926008, lng: -54.14262099744479 }, { lat: -32.228837558758535, lng: -54.1426236796538 }, { lat: -32.228769490314725, lng: -54.142575399891534 }, { lat: -32.228708228671714, lng: -54.14254053117434 }, { lat: -32.22853477387191, lng: -54.1423730350611 }, { lat: -32.22846670520132, lng: -54.142359624016024 }, { lat: -32.22842132605929, lng: -54.14231402646277 }, { lat: -32.228448553547224, lng: -54.14224965344641 }, { lat: -32.22853250491704, lng: -54.142217466938234 }, { lat: -32.228634607829854, lng: -54.14224428902838 }, { lat: -32.22874578642669, lng: -54.142316708671785 }, { lat: -32.228861502781, lng: -54.14230329762671 }, { lat: -32.22897268110028, lng: -54.14233548413489 }, { lat: -32.22902713573764, lng: -54.14241326819632 }, { lat: -32.229120162334326, lng: -54.14247764121268 }, { lat: -32.229269912265565, lng: -54.142584929573275 }, { lat: -32.229367476481954, lng: -54.14257688294623 }, { lat: -32.229441142240404, lng: -54.14247764121268 }, { lat: -32.22955912663863, lng: -54.14251250992987 }, { lat: -32.22952963055344, lng: -54.14243472586844 }, { lat: -32.229511479111636, lng: -54.142332801925875 }, { lat: -32.22952963055344, lng: -54.14227111111853 }, { lat: -32.22948198301097, lng: -54.14219869147513 }, { lat: -32.22961584985249, lng: -54.14213431845877 }, { lat: -32.22972475832383, lng: -54.14211822520468 }, { lat: -32.22980190174541, lng: -54.14213700066779 }, { lat: -32.22983139774225, lng: -54.142201373684145 }, { lat: -32.229849549120146, lng: -54.14228183995459 }, { lat: -32.22981551528361, lng: -54.142359624016024 }, { lat: -32.22977240573901, lng: -54.14248837004874 }, { lat: -32.22969980014402, lng: -54.14271367560599 }, { lat: -32.22959089164276, lng: -54.14270831118796 }, { lat: -32.2296498837638, lng: -54.142804870712496 }, { lat: -32.229627194491, lng: -54.14289338360999 }, { lat: -32.22952509269333, lng: -54.14285449157927 }, { lat: -32.22947744514848, lng: -54.14290143023703 }, { lat: -32.22955005092112, lng: -54.142968485462404 }, { lat: -32.22960223628439, lng: -54.14303554068778 }, { lat: -32.22953189948342, lng: -54.14312137137625 }, { lat: -32.22942299078093, lng: -54.14303822289679 }, { lat: -32.2292709721655, lng: -54.14337349902365 }, { lat: -32.22915752527188, lng: -54.14349688063834 }, { lat: -32.22894197578383, lng: -54.143808016884066 }, { lat: -32.228846680057735, lng: -54.14385361443732 }, { lat: -32.22884894900475, lng: -54.14399845372412 }, { lat: -32.228749115282255, lng: -54.14403600465033 }, { lat: -32.228778611620776, lng: -54.144207666027285 }, { lat: -32.22869466047829, lng: -54.14428545008872 }, { lat: -32.228681046772216, lng: -54.14449466239188 }, { lat: -32.228690122576495, lng: -54.14467705260489 }, { lat: -32.22863112983244, lng: -54.14479238759253 }, { lat: -32.22857213705011, lng: -54.144837985145784 }, { lat: -32.22851541318484, lng: -54.144854078399874 }, { lat: -32.22848993837537, lng: -54.14482372909001 }, { lat: -32.22846938739809, lng: -54.144781635699715 }, { lat: -32.22844442887351, lng: -54.1447253093104 }, { lat: -32.22845350470143, lng: -54.14466898292109 }, { lat: -32.228458042615046, lng: -54.14460729211375 }, { lat: -32.22848073217975, lng: -54.14457778781458 }, { lat: -32.22850342173875, lng: -54.144508050380196 }, { lat: -32.22853291815701, lng: -54.144502685962166 }, { lat: -32.228526111292105, lng: -54.14447049945399 }, { lat: -32.228507959649875, lng: -54.14447586387202 }, { lat: -32.22847392531092, lng: -54.14441149085566 }, { lat: -32.2284671184416, lng: -54.14435248225733 }, { lat: -32.228528380247134, lng: -54.14433907121226 }, { lat: -32.22854199397609, lng: -54.144304202495064 }, { lat: -32.22851022860535, lng: -54.14424251168772 }, { lat: -32.22847392531092, lng: -54.14422373622462 }, { lat: -32.22847392531092, lng: -54.144167409835305 }, { lat: -32.22851022860535, lng: -54.14411108344599 }, { lat: -32.228499712366045, lng: -54.144043794620224 }, { lat: -32.22854962937799, lng: -54.1439499173047 }, { lat: -32.22850651923292, lng: -54.14392845963258 }, { lat: -32.22848609863075, lng: -54.1438774976613 }, { lat: -32.22847702280609, lng: -54.14381044243593 }, { lat: -32.22853374669534, lng: -54.14379434918184 }, { lat: -32.228581394734945, lng: -54.14379971359987 }, { lat: -32.228706187101245, lng: -54.143864086616226 }, { lat: -32.228744759252514, lng: -54.143853357780166 }, { lat: -32.22880115181233, lng: -54.143826477557894 }, { lat: -32.228896447586166, lng: -54.14364140513587 }, { lat: -32.22897586065471, lng: -54.14360117200064 }, { lat: -32.229062080479125, lng: -54.14347242596793 }, { lat: -32.22910065247935, lng: -54.143421463996646 }, { lat: -32.22913014870378, lng: -54.14335440877127 }, { lat: -32.22915017881268, lng: -54.14322298052954 }, { lat: -32.22921597803355, lng: -54.14318274739432 }, { lat: -32.229247743157615, lng: -54.14311032775092 }, { lat: -32.229234129534376, lng: -54.14300572159934 }, { lat: -32.229290852951074, lng: -54.142949395210024 }, { lat: -32.229422451141474, lng: -54.142911844283816 }, { lat: -32.229404299678265, lng: -54.14280455592322 }, { lat: -32.2293339627241, lng: -54.14273481848883 }, { lat: -32.229256818905306, lng: -54.142670445472476 }, { lat: -32.229170599265636, lng: -54.14260070803809 }, { lat: -32.22903495695724, lng: -54.14259685756365 }, { lat: -32.228982771268235, lng: -54.142658548370996 }, { lat: -32.22893966132863, lng: -54.14260758639971 }, { lat: -32.22890108926008, lng: -54.14262099744479 }, { lat: -32.228837558758535, lng: -54.1426236796538 }, { lat: -32.228769490314725, lng: -54.142575399891534 }, { lat: -32.228708228671714, lng: -54.14254053117434 }, { lat: -32.22853477387191, lng: -54.1423730350611 }, { lat: -32.22846670520132, lng: -54.142359624016024 }, { lat: -32.22842132605929, lng: -54.14231402646277 }, { lat: -32.228448553547224, lng: -54.14224965344641 }, { lat: -32.22853250491704, lng: -54.142217466938234 }, { lat: -32.228634607829854, lng: -54.14224428902838 }, { lat: -32.22874578642669, lng: -54.142316708671785 }, { lat: -32.228861502781, lng: -54.14230329762671 }, { lat: -32.22897268110028, lng: -54.14233548413489 }, { lat: -32.22902713573764, lng: -54.14241326819632 }, { lat: -32.229120162334326, lng: -54.14247764121268 }, { lat: -32.229269912265565, lng: -54.142584929573275 }, { lat: -32.229367476481954, lng: -54.14257688294623 }, { lat: -32.229441142240404, lng: -54.14247764121268 }, { lat: -32.22955912663863, lng: -54.14251250992987 }, { lat: -32.22952963055344, lng: -54.14243472586844 }, { lat: -32.229511479111636, lng: -54.142332801925875 }, { lat: -32.22952963055344, lng: -54.14227111111853 }, { lat: -32.22948198301097, lng: -54.14219869147513 }, { lat: -32.22961584985249, lng: -54.14213431845877 }, { lat: -32.22972475832383, lng: -54.14211822520468 }, { lat: -32.22980190174541, lng: -54.14213700066779 }, { lat: -32.22983139774225, lng: -54.142201373684145 }, { lat: -32.229849549120146, lng: -54.14228183995459 }, { lat: -32.22981551528361, lng: -54.142359624016024 }, { lat: -32.22977240573901, lng: -54.14248837004874 }, { lat: -32.22969980014402, lng: -54.14271367560599 }, { lat: -32.22959089164276, lng: -54.14270831118796 }, { lat: -32.2296498837638, lng: -54.142804870712496 }, { lat: -32.229627194491, lng: -54.14289338360999 }, { lat: -32.22952509269333, lng: -54.14285449157927 }, { lat: -32.22947744514848, lng: -54.14290143023703 }, { lat: -32.22955005092112, lng: -54.142968485462404 }, { lat: -32.22960223628439, lng: -54.14303554068778 }, { lat: -32.22953189948342, lng: -54.14312137137625 }, { lat: -32.22942299078093, lng: -54.14303822289679 }, { lat: -32.2292709721655, lng: -54.14337349902365 }, { lat: -32.22915752527188, lng: -54.14349688063834 }, { lat: -32.22894197578383, lng: -54.143808016884066 }, { lat: -32.228846680057735, lng: -54.14385361443732 }, { lat: -32.22884894900475, lng: -54.14399845372412 }, { lat: -32.228749115282255, lng: -54.14403600465033 }, { lat: -32.228778611620776, lng: -54.144207666027285 }, { lat: -32.22869466047829, lng: -54.14428545008872 }, { lat: -32.228681046772216, lng: -54.14449466239188 }, { lat: -32.228690122576495, lng: -54.14467705260489 }, { lat: -32.22863112983244, lng: -54.14479238759253 }, { lat: -32.22857213705011, lng: -54.144837985145784 }, { lat: -32.22851541318484, lng: -54.144854078399874 }];
var Estancia_taladro_bosque2 = [{ lat: -32.22882054858225, lng: -54.151506032690385 }, { lat: -32.22873886642829, lng: -54.15144970630107 }, { lat: -32.228643570489204, lng: -54.15136655782161 }, { lat: -32.22855054340469, lng: -54.15129413817821 }, { lat: -32.228482474745924, lng: -54.15119489644466 }, { lat: -32.22830095807332, lng: -54.15093740437923 }, { lat: -32.22824423403878, lng: -54.15083816264568 }, { lat: -32.22821700648963, lng: -54.15080865834651 }, { lat: -32.22820566167507, lng: -54.15071746324001 }, { lat: -32.228271461579766, lng: -54.150661136850694 }, { lat: -32.2283327235172, lng: -54.150634089410026 }, { lat: -32.228380371662205, lng: -54.15052680104943 }, { lat: -32.22849381952593, lng: -54.15045974582406 }, { lat: -32.22850062639325, lng: -54.15040073722573 }, { lat: -32.22856188817618, lng: -54.15034441083642 }, { lat: -32.228591384575466, lng: -54.15028003782006 }, { lat: -32.228670797910574, lng: -54.15023712247582 }, { lat: -32.2287320595788, lng: -54.150162020623405 }, { lat: -32.22895441639805, lng: -54.149915257394035 }, { lat: -32.229013408932246, lng: -54.14985624879571 }, { lat: -32.229042905185, lng: -54.149888435303886 }, { lat: -32.22905878777865, lng: -54.14999035924645 }, { lat: -32.229145451298756, lng: -54.15010020420067 }, { lat: -32.22921351946098, lng: -54.150086793155594 }, { lat: -32.22926116714419, lng: -54.150108250827714 }, { lat: -32.229306545866876, lng: -54.1502504079055 }, { lat: -32.22934511776335, lng: -54.150338920802994 }, { lat: -32.22942226150719, lng: -54.1503576962661 }, { lat: -32.22948125373771, lng: -54.15041938707344 }, { lat: -32.22954705271887, lng: -54.150481077880784 }, { lat: -32.22961058272445, lng: -54.150548133106156 }, { lat: -32.22961738950812, lng: -54.15061250612251 }, { lat: -32.22959016237036, lng: -54.15066615030281 }, { lat: -32.22951415323424, lng: -54.150611165018006 }, { lat: -32.229456295491005, lng: -54.15054008647911 }, { lat: -32.229433606169884, lng: -54.150591048450394 }, { lat: -32.22940184111078, lng: -54.15066615030281 }, { lat: -32.229258898207455, lng: -54.15075198099129 }, { lat: -32.229224864149714, lng: -54.150837811679764 }, { lat: -32.22922940202482, lng: -54.15089145586006 }, { lat: -32.22923620883704, lng: -54.150974604339524 }, { lat: -32.229215788398825, lng: -54.15109262153618 }, { lat: -32.229163602813664, lng: -54.151183816642686 }, { lat: -32.229054693669845, lng: -54.15110871479027 }, { lat: -32.22897301172632, lng: -54.15112480804436 }, { lat: -32.228970742782394, lng: -54.151226731986924 }, { lat: -32.22890948127505, lng: -54.15126160070412 }, { lat: -32.22888507467454, lng: -54.1513668591636 }, { lat: -32.22887599888972, lng: -54.1514741475242 }];

var Estancia_taladro_potrero1 = [{ lat: -32.226510301845465, lng: -54.14620347840431 }, { lat: -32.22818935031493, lng: -54.14496966225746 }, { lat: -32.227771860079464, lng: -54.14444394929054 }, { lat: -32.22741789946456, lng: -54.14414354188087 }, { lat: -32.22471323182217, lng: -54.14442249161842 }, { lat: -32.22528503068355, lng: -54.1450125776017 }, { lat: -32.22598389107372, lng: -54.14564557892921 }, { lat: -32.22626524893444, lng: -54.1459137998307 }];
var Estancia_taladro_potrero2 = [{ lat: -32.2246315459769, lng: -54.14443322045448 }, { lat: -32.22359685224985, lng: -54.14343543870094 }, { lat: -32.22405066673805, lng: -54.14328523499611 }, { lat: -32.22464062218556, lng: -54.14275952202919 }, { lat: -32.224622469767354, lng: -54.142351826258924 }, { lat: -32.224858450921374, lng: -54.141557892390516 }, { lat: -32.22474953661873, lng: -54.14125748498085 }, { lat: -32.22470415562077, lng: -54.14102145058754 }, { lat: -32.2246315459769, lng: -54.140849789210584 }, { lat: -32.22464062218556, lng: -54.140581568309095 }, { lat: -32.227209152814694, lng: -54.141107281276014 }, { lat: -32.22766294926785, lng: -54.14102145058754 }, { lat: -32.22793522605217, lng: -54.141075094767835 }, { lat: -32.22824380542165, lng: -54.14123602730873 }, { lat: -32.22833456386033, lng: -54.141354044505384 }, { lat: -32.22836179137427, lng: -54.141547163554456 }, { lat: -32.228570535376775, lng: -54.1414827905381 }, { lat: -32.22912415845269, lng: -54.141847570964124 }, { lat: -32.22942365805526, lng: -54.14195485932472 }, { lat: -32.22968685386089, lng: -54.14186902863624 }, { lat: -32.229995427283015, lng: -54.141815384455946 }, { lat: -32.23020416753326, lng: -54.14167590958717 }, { lat: -32.23040383167183, lng: -54.14169736725929 }, { lat: -32.23066702463877, lng: -54.14177246911171 }, { lat: -32.23084853658564, lng: -54.14202996117714 }, { lat: -32.23095744357975, lng: -54.14219089371803 }, { lat: -32.23106635044335, lng: -54.14194413048866 }, { lat: -32.23131139040922, lng: -54.14220162255409 }, { lat: -32.23158365626301, lng: -54.142362555094984 }, { lat: -32.23170163787966, lng: -54.14250202996376 }, { lat: -32.231737939884724, lng: -54.14265223366859 }, { lat: -32.2318740722746, lng: -54.14265223366859 }, { lat: -32.23186499678829, lng: -54.1428882680619 }, { lat: -32.23194667613248, lng: -54.14317794663551 }, { lat: -32.23150197659252, lng: -54.14324231965187 }, { lat: -32.231256937140564, lng: -54.14295264107826 }, { lat: -32.23102097259937, lng: -54.14318867547157 }, { lat: -32.230812234225276, lng: -54.14317794663551 }, { lat: -32.23067610024473, lng: -54.143349608012464 }, { lat: -32.23052181482023, lng: -54.143542727061536 }, { lat: -32.23051273919888, lng: -54.144079168864515 }, { lat: -32.23026769707949, lng: -54.14461561066749 }, { lat: -32.23010433529948, lng: -54.14473362786415 }, { lat: -32.2295688696285, lng: -54.144808729716566 }, { lat: -32.22825288126959, lng: -54.14494820458534 }, { lat: -32.227426975394984, lng: -54.14416499955299 }, { lat: -32.226029271432736, lng: -54.144315203257825 }];
var Estancia_taladro_potrero3 = [{ lat: -32.2265375299059, lng: -54.14621420724037 }, { lat: -32.2274723550335, lng: -54.14548464638832 }, { lat: -32.228044136537505, lng: -54.145055492945936 }, { lat: -32.22864314187396, lng: -54.144851645060804 }, { lat: -32.22930567348117, lng: -54.14494820458534 }, { lat: -32.229759459466244, lng: -54.144819458552625 }, { lat: -32.23024047013654, lng: -54.14469071251991 }, { lat: -32.23032215094089, lng: -54.14503403527382 }, { lat: -32.230258621432746, lng: -54.145538290568616 }, { lat: -32.23034937785936, lng: -54.14603181702736 }, { lat: -32.23077593185039, lng: -54.146589716502454 }, { lat: -32.2300771083076, lng: -54.14741583687904 }, { lat: -32.23053089044068, lng: -54.148102482386854 }, { lat: -32.230630722205895, lng: -54.148091753550794 }, { lat: -32.230748705059725, lng: -54.148038109370496 }, { lat: -32.23121155939176, lng: -54.14745875222328 }, { lat: -32.23135676810815, lng: -54.14772697312477 }, { lat: -32.23171978888401, lng: -54.14820977074745 }, { lat: -32.23225524188131, lng: -54.14873548371437 }, { lat: -32.23240952436281, lng: -54.149089535304334 }, { lat: -32.232273392775085, lng: -54.14928265435341 }, { lat: -32.23228246822061, lng: -54.14943285805824 }, { lat: -32.23179239286516, lng: -54.14961524827125 }, { lat: -32.23152920315751, lng: -54.14966889245155 }, { lat: -32.231220634943334, lng: -54.14996929986122 }, { lat: -32.23118433273161, lng: -54.15026970727089 }, { lat: -32.23099374588211, lng: -54.150323351451185 }, { lat: -32.23079408303964, lng: -54.150291164943006 }, { lat: -32.23061257098401, lng: -54.150323351451185 }, { lat: -32.230421982935404, lng: -54.15026970727089 }, { lat: -32.230258621432746, lng: -54.15025897843483 }, { lat: -32.230195091880184, lng: -54.15043063981178 }, { lat: -32.23003172996967, lng: -54.1504520974839 }, { lat: -32.22987744345122, lng: -54.1505057416642 }, { lat: -32.22970500526768, lng: -54.150559385844495 }, { lat: -32.22940550659229, lng: -54.15065594536903 }, { lat: -32.22936920365547, lng: -54.15074177605751 }, { lat: -32.22922399176322, lng: -54.15088125092628 }, { lat: -32.22922399176322, lng: -54.15110655648353 }, { lat: -32.22912415845269, lng: -54.15111728531959 }, { lat: -32.22897894616891, lng: -54.15122457368019 }, { lat: -32.22909693116717, lng: -54.151353319712904 }, { lat: -32.22899709771707, lng: -54.15147133690956 }, { lat: -32.22884280944211, lng: -54.15143915040138 }, { lat: -32.22873389991388, lng: -54.151535709925916 }, { lat: -32.227953377808795, lng: -54.15061303002479 }, { lat: -32.22749050688256, lng: -54.150033672877576 }, { lat: -32.227236380665786, lng: -54.149089535304334 }, { lat: -32.22681434805737, lng: -54.147297819682386 }];
var Estancia_taladro_potrero4 = [{ lat: -32.23121867976974, lng: -54.14761940119221 }, { lat: -32.23110069752605, lng: -54.14763013002827 }, { lat: -32.23040641429697, lng: -54.14836505529835 }, { lat: -32.229975320733885, lng: -54.1475282060857 }, { lat: -32.23050624619891, lng: -54.146964942192575 }];
var Estancia_taladro_potrero5 = [{ lat: -32.23117783977963, lng: -54.14754966375782 }, { lat: -32.2304926327642, lng: -54.1469327556844 }, { lat: -32.23027716785164, lng: -54.14667526361897 }, { lat: -32.23037699989556, lng: -54.14591888067677 }, { lat: -32.23028170567421, lng: -54.14560774443104 }, { lat: -32.23030893260479, lng: -54.14513031122639 }, { lat: -32.23027716785164, lng: -54.144948554735706 }, { lat: -32.230318008246506, lng: -54.14484126637511 }, { lat: -32.23028624349653, lng: -54.14458377430968 }, { lat: -32.23035884862301, lng: -54.1443531043344 }, { lat: -32.23046321839069, lng: -54.14426190922789 }, { lat: -32.23048590745477, lng: -54.14412779877715 }, { lat: -32.23048590745477, lng: -54.14400441716246 }, { lat: -32.2304586805772, lng: -54.14380593369536 }, { lat: -32.230540361185426, lng: -54.143746925097034 }, { lat: -32.23054943680402, lng: -54.14363963673644 }, { lat: -32.2305222099455, lng: -54.14351089070372 }, { lat: -32.23059481488344, lng: -54.14341433117919 }, { lat: -32.230690108776486, lng: -54.14330167840056 }, { lat: -32.230690108776486, lng: -54.143242669802234 }, { lat: -32.23079447816372, lng: -54.143242669802234 }, { lat: -32.230901218961655, lng: -54.14312184906534 }, { lat: -32.23098743695944, lng: -54.143175493245636 }, { lat: -32.23156373410702, lng: -54.1423761949592 }, { lat: -32.231666039364974, lng: -54.14246107859492 }, { lat: -32.23169780363264, lng: -54.142600553463694 }, { lat: -32.23184301157207, lng: -54.14262737555384 }, { lat: -32.23184754931643, lng: -54.142825859020945 }, { lat: -32.231938304156195, lng: -54.14294924063563 }, { lat: -32.23192922867631, lng: -54.14313699526667 }, { lat: -32.231942841895815, lng: -54.14328183455348 }, { lat: -32.23200183249012, lng: -54.14351250452876 }, { lat: -32.2321334267548, lng: -54.14354469103694 }, { lat: -32.23223325675951, lng: -54.143598335217234 }, { lat: -32.23227863399811, lng: -54.1437002591598 }, { lat: -32.23233762437443, lng: -54.143609064053294 }, { lat: -32.23240569014567, lng: -54.143566148709056 }, { lat: -32.23254714022704, lng: -54.14351669631858 }, { lat: -32.23273772381862, lng: -54.14346305213828 }, { lat: -32.232864779324274, lng: -54.1434845098104 }, { lat: -32.23299183465228, lng: -54.14342550121207 }, { lat: -32.23314157820363, lng: -54.14343623004813 }, { lat: -32.233168804277355, lng: -54.14353278957267 }, { lat: -32.233245944775305, lng: -54.143591798170995 }, { lat: -32.23330039685207, lng: -54.143586433752965 }, { lat: -32.23338207490604, lng: -54.14366153560538 }, { lat: -32.233540893134155, lng: -54.14375273071189 }, { lat: -32.233745087590975, lng: -54.14375809512992 }, { lat: -32.233772313483875, lng: -54.143849290236425 }, { lat: -32.23385399111365, lng: -54.14389220558066 }, { lat: -32.2339039051846, lng: -54.14394048534293 }, { lat: -32.23401280851692, lng: -54.14396730743308 }, { lat: -32.234062722500624, lng: -54.14402631603141 }, { lat: -32.234126249349316, lng: -54.14414433322806 }, { lat: -32.234264462936686, lng: -54.14437500320334 }, { lat: -32.23424177481606, lng: -54.14444474063773 }, { lat: -32.234305301539564, lng: -54.144552028998326 }];
var Estancia_taladro_potrero6 = [{ lat: -32.231267521931635, lng: -54.14769029033007 }, { lat: -32.231267521931635, lng: -54.147507900117056 }, { lat: -32.23440760674432, lng: -54.144503826020376 }, { lat: -32.23451650947294, lng: -54.14460038554491 }, { lat: -32.23451650947294, lng: -54.144761318085806 }, { lat: -32.234625412071054, lng: -54.14483641993822 }, { lat: -32.23458911121953, lng: -54.14520120036425 }, { lat: -32.23468893852634, lng: -54.145297759888784 }, { lat: -32.23481599130367, lng: -54.14540504824938 }, { lat: -32.23497026943729, lng: -54.145501607773916 }, { lat: -32.23506102115824, lng: -54.14573764216723 }, { lat: -32.23497934461348, lng: -54.14595221888842 }, { lat: -32.235006570136555, lng: -54.14608096492113 }, { lat: -32.23497934461348, lng: -54.146263355134145 }, { lat: -32.23507917149155, lng: -54.14642428767504 }, { lat: -32.23522437402752, lng: -54.14669250857653 }, { lat: -32.235151772788534, lng: -54.146992915986196 }, { lat: -32.23521529887582, lng: -54.147025102494375 }, { lat: -32.235306050352015, lng: -54.14722895037951 }, { lat: -32.23539680173759, lng: -54.14732550990404 }, { lat: -32.23575980637342, lng: -54.14734696757616 }, { lat: -32.235705355770506, lng: -54.147540086625234 }, { lat: -32.23542402713559, lng: -54.14760445964159 }, { lat: -32.235197148569696, lng: -54.14767956149401 }, { lat: -32.23486136725252, lng: -54.14791559588732 }, { lat: -32.234634487281674, lng: -54.148012155411855 }, { lat: -32.23427147814997, lng: -54.14811944377245 }, { lat: -32.23385401585563, lng: -54.14811944377245 }, { lat: -32.233563606171835, lng: -54.14837693583788 }, { lat: -32.23319151740805, lng: -54.14840912234606 }, { lat: -32.23281942712061, lng: -54.148784631608144 }, { lat: -32.232656069927764, lng: -54.1488490046245 }, { lat: -32.23251993870938, lng: -54.14897775065722 }, { lat: -32.23246548616494, lng: -54.148988479493276 }];

var GMaps_lista_nodos_alarmas_ID = [];
var GMaps_lista_nodos = [];
var infowindow = null;

var GMaps_mapa_autoCorregirPosicion = false;
var GMaps_mapa_coordenadas = GMaps_campo_taladro; // Por defecto campo de taladro
var GMaps_mapa_coordenadas_initPos = { lat: -32.22765760461139, lng: -54.14543190267292 };
var GMaps_mapa_seleccionado = 0; // Mapa seleccionado

var GMaps_GW_coordenadas = { lat: -32.37116005636433, lng: -54.16568480347124 };

var GMaps_lista_mapas = [
    {
        // La Capelina, campo de Taladro, Cerro Largo
        mapa_perimetro: [{ lat: -32.22872386481253, lng: -54.15154802896079 }, { lat: -32.22892353220333, lng: -54.15133881665763 }, { lat: -32.229041517273544, lng: -54.15148902036246 }, { lat: -32.22911866127508, lng: -54.15131199456748 }, { lat: -32.2290460551578, lng: -54.15122079946097 }, { lat: -32.2291095855136, lng: -54.15111351110038 }, { lat: -32.22920488096403, lng: -54.151177884116734 }, { lat: -32.22927294908173, lng: -54.15107596017417 }, { lat: -32.22921849459164, lng: -54.15096330739554 }, { lat: -32.22930017631453, lng: -54.1508291969448 }, { lat: -32.2294998424392, lng: -54.150641442313756 }, { lat: -32.22965866745236, lng: -54.15077018834647 }, { lat: -32.22971312167873, lng: -54.150630713477696 }, { lat: -32.229681356717315, lng: -54.15055024720725 }, { lat: -32.229855788730774, lng: -54.150484778979546 }, { lat: -32.23001007528599, lng: -54.15044186363531 }, { lat: -32.230150748093344, lng: -54.15042040596319 }, { lat: -32.23025058027615, lng: -54.15040967712713 }, { lat: -32.230291420682946, lng: -54.150280931094414 }, { lat: -32.23036856362351, lng: -54.150270202258355 }, { lat: -32.230577303016695, lng: -54.150291659930474 }, { lat: -32.230699823741574, lng: -54.15031311760259 }, { lat: -32.23079965532119, lng: -54.15021655807806 }, { lat: -32.23098819941166, lng: -54.150291659930474 }, { lat: -32.231137946264774, lng: -54.15031848202062 }, { lat: -32.23121962626246, lng: -54.150248744586236 }, { lat: -32.231196937381576, lng: -54.150039532283074 }, { lat: -32.231437439230696, lng: -54.149733760455376 }, { lat: -32.23175054445791, lng: -54.14961037884069 }, { lat: -32.23199558257886, lng: -54.14958892116857 }, { lat: -32.23229961044006, lng: -54.14947626838995 }, { lat: -32.23224515776358, lng: -54.149277784922845 }, { lat: -32.23232229904562, lng: -54.14922414074255 }, { lat: -32.232458430560094, lng: -54.14908466587377 }, { lat: -32.23274884377599, lng: -54.14883253822637 }, { lat: -32.23296211539033, lng: -54.148735978701836 }, { lat: -32.23308917058224, lng: -54.148553588488824 }, { lat: -32.23348394808065, lng: -54.14838192711187 }, { lat: -32.23368814266544, lng: -54.14836046943975 }, { lat: -32.23383334742434, lng: -54.14820490131689 }, { lat: -32.23402392831826, lng: -54.14807079086614 }, { lat: -32.23414190676655, lng: -54.14807079086614 }, { lat: -32.234305261288235, lng: -54.14810297737432 }, { lat: -32.23441416413954, lng: -54.14808688412023 }, { lat: -32.23458659338715, lng: -54.148022511103875 }, { lat: -32.23478624789664, lng: -54.14795277366949 }, { lat: -32.23496775161549, lng: -54.14791522274328 }, { lat: -32.235058503338955, lng: -54.14787767181707 }, { lat: -32.23519463075418, lng: -54.147738196948296 }, { lat: -32.23534890824489, lng: -54.14758799324346 }, { lat: -32.23550772303524, lng: -54.147528984645135 }, { lat: -32.2356302371124, lng: -54.14759872207952 }, { lat: -32.23587980231414, lng: -54.147539713481194 }, { lat: -32.23603407864144, lng: -54.147602541722264 }, { lat: -32.23612029176908, lng: -54.1474469735994 }, { lat: -32.23583442687389, lng: -54.147345049656835 }, { lat: -32.23544419715241, lng: -54.14721093920609 }, { lat: -32.23527176953229, lng: -54.146872980870214 }, { lat: -32.23524908166317, lng: -54.14666376856705 }, { lat: -32.23519009317696, lng: -54.14646528509995 }, { lat: -32.23513564223262, lng: -54.14628825930497 }, { lat: -32.235117491910586, lng: -54.14616487769028 }, { lat: -32.235117491910586, lng: -54.14600930956742 }, { lat: -32.23518555559951, lng: -54.145805461682286 }, { lat: -32.23514925497176, lng: -54.14550505427262 }, { lat: -32.23509026642075, lng: -54.14544068125626 }, { lat: -32.234985797613184, lng: -54.14549567503869 }, { lat: -32.234924540160776, lng: -54.14545812411248 }, { lat: -32.234854207479295, lng: -54.145345471333854 }, { lat: -32.23470219794949, lng: -54.14522208971917 }, { lat: -32.234636402701, lng: -54.145171127747886 }, { lat: -32.234602370657235, lng: -54.145061157178276 }, { lat: -32.234602370657235, lng: -54.14483316941201 }, { lat: -32.23464774671277, lng: -54.14475538535058 }, { lat: -32.234574478668925, lng: -54.144724724394926 }, { lat: -32.234474651236354, lng: -54.14468717346872 }, { lat: -32.234436081517124, lng: -54.144646940333494 }, { lat: -32.23448599526831, lng: -54.14450746546472 }, { lat: -32.23445423197527, lng: -54.14445650349344 }, { lat: -32.23437936131204, lng: -54.14443504582132 }, { lat: -32.234270458419026, lng: -54.14452892313684 }, { lat: -32.23423415742568, lng: -54.14444845686639 }, { lat: -32.23427726485367, lng: -54.14439213047708 }, { lat: -32.23429768415451, lng: -54.14430898199762 }, { lat: -32.234193318790844, lng: -54.14415073166574 }, { lat: -32.234113586363726, lng: -54.144139619891696 }, { lat: -32.23405005950618, lng: -54.14400014502292 }, { lat: -32.23397518850991, lng: -54.14392772537952 }, { lat: -32.233888973346886, lng: -54.143914314334445 }, { lat: -32.23377553221827, lng: -54.1438526235271 }, { lat: -32.233601611905655, lng: -54.14376411062961 }, { lat: -32.23346321327205, lng: -54.14374801737552 }, { lat: -32.23337472878927, lng: -54.143667551105075 }, { lat: -32.23321591027075, lng: -54.14361390692478 }, { lat: -32.23291428834032, lng: -54.143459308050616 }, { lat: -32.232814459083805, lng: -54.14346199025963 }, { lat: -32.23271916741845, lng: -54.143486130140765 }, { lat: -32.23246278696557, lng: -54.143529045485 }, { lat: -32.23241740981892, lng: -54.1435639142022 }, { lat: -32.23240606552871, lng: -54.14366852035378 }, { lat: -32.23236749493142, lng: -54.14366315593575 }, { lat: -32.23234707519682, lng: -54.14362560500954 }, { lat: -32.232349344056445, lng: -54.14359878291939 }, { lat: -32.23230396685316, lng: -54.14359878291939 }, { lat: -32.23226085848902, lng: -54.14367388477181 }, { lat: -32.23223590100571, lng: -54.14365779151772 }, { lat: -32.23223136328074, lng: -54.143601465128405 }, { lat: -32.2320611984306, lng: -54.143529045485 }, { lat: -32.23201355221545, lng: -54.14353977432106 }, { lat: -32.23200447674308, lng: -54.14346735467766 }, { lat: -32.231963637106126, lng: -54.1433305620179 }, { lat: -32.23197709932582, lng: -54.14324512904009 }, { lat: -32.23195663527353, lng: -54.14317796923925 }, { lat: -32.231911257874124, lng: -54.143062634251606 }, { lat: -32.231890838036996, lng: -54.14298216798116 }, { lat: -32.231908989003564, lng: -54.14292852380086 }, { lat: -32.23185680496492, lng: -54.14285073973943 }, { lat: -32.231845460604745, lng: -54.14273540475179 }, { lat: -32.23183638511557, lng: -54.14264152743627 }, { lat: -32.231791007656106, lng: -54.14258251883794 }, { lat: -32.231704790420736, lng: -54.142585201046955 }, { lat: -32.2316548751418, lng: -54.14255569674779 }, { lat: -32.231641261879155, lng: -54.142502052567494 }, { lat: -32.23165260626485, lng: -54.14245109059621 }, { lat: -32.23151874242356, lng: -54.142338437817585 }, { lat: -32.231480171449654, lng: -54.14225260712911 }, { lat: -32.23138487838511, lng: -54.14216945864965 }, { lat: -32.23126916524378, lng: -54.14216677644063 }, { lat: -32.231203367509494, lng: -54.142102403424275 }, { lat: -32.2311965608446, lng: -54.14204607703496 }, { lat: -32.23113530083768, lng: -54.142008526108754 }, { lat: -32.23106950300646, lng: -54.14204607703496 }, { lat: -32.23099009176739, lng: -54.14204339482595 }, { lat: -32.23092429383104, lng: -54.14219896294881 }, { lat: -32.230874378123396, lng: -54.14218555190374 }, { lat: -32.230840344670646, lng: -54.142102403424275 }, { lat: -32.23080404230701, lng: -54.1420165727358 }, { lat: -32.23061120509151, lng: -54.141756398461354 }, { lat: -32.23040927250054, lng: -54.141745669625294 }, { lat: -32.23031851613375, lng: -54.14176176287938 }, { lat: -32.23020733946089, lng: -54.141713483117115 }, { lat: -32.23015969227375, lng: -54.14173762299825 }, { lat: -32.230050784323616, lng: -54.14176176287938 }, { lat: -32.22994868300183, lng: -54.141818089268696 }, { lat: -32.22992826272372, lng: -54.14177517392446 }, { lat: -32.22986700186181, lng: -54.141812724850666 }, { lat: -32.22968095010215, lng: -54.141850275776875 }, { lat: -32.228596396897224, lng: -54.14142916896154 }, { lat: -32.22850563872002, lng: -54.141482813141835 }, { lat: -32.2284557216839, lng: -54.1415310929041 }, { lat: -32.228315046252845, lng: -54.141509635231984 }, { lat: -32.22828781872489, lng: -54.14139698245336 }, { lat: -32.228215211943855, lng: -54.14131115176488 }, { lat: -32.22810630166352, lng: -54.141219956658375 }, { lat: -32.22792024629937, lng: -54.14112876155187 }, { lat: -32.22776141824814, lng: -54.14106975295354 }, { lat: -32.227588976049674, lng: -54.14110730387975 }, { lat: -32.22754813442844, lng: -54.14104293086339 }, { lat: -32.22746191316777, lng: -54.14106438853551 }, { lat: -32.22726678053897, lng: -54.14110193946172 }, { lat: -32.227219178052465, lng: -54.14112734508027 }, { lat: -32.22692617114122, lng: -54.14107370089997 }, { lat: -32.226592913800246, lng: -54.141003181907166 }, { lat: -32.225888525195664, lng: -54.14086102482938 }, { lat: -32.2250329527309, lng: -54.14068436632373 }, { lat: -32.22471528625991, lng: -54.14061194668033 }, { lat: -32.22468351955175, lng: -54.14064949760654 }, { lat: -32.22467898144968, lng: -54.140767514803194 }, { lat: -32.224644945676914, lng: -54.140856027700686 }, { lat: -32.22461771704953, lng: -54.14091235409 }, { lat: -32.22462452420715, lng: -54.14100086698749 }, { lat: -32.224760667252305, lng: -54.141019642450594 }, { lat: -32.22474024580854, lng: -54.14107865104892 }, { lat: -32.22475159105564, lng: -54.14129859218814 }, { lat: -32.2247810886915, lng: -54.1414353848479 }, { lat: -32.22485823630925, lng: -54.14148366461017 }, { lat: -32.224835545840236, lng: -54.14152657995441 }, { lat: -32.22482646965104, lng: -54.14164727936008 }, { lat: -32.22482873869843, lng: -54.14175188551166 }, { lat: -32.224803779174096, lng: -54.14188331375339 }, { lat: -32.22473797675895, lng: -54.142132759191774 }, { lat: -32.224654021884234, lng: -54.14228832731464 }, { lat: -32.224654021884234, lng: -54.14257800588825 }, { lat: -32.224663098090645, lng: -54.14272820959308 }, { lat: -32.224572335985776, lng: -54.142873048879885 }, { lat: -32.22403229958794, lng: -54.143339753248476 }, { lat: -32.223832621451905, lng: -54.14344167719104 }, { lat: -32.22377362555503, lng: -54.143650889494204 }, { lat: -32.224558620812125, lng: -54.14434571695921 }, { lat: -32.22517126335375, lng: -54.14488215876219 }, { lat: -32.225910966993915, lng: -54.14561708403227 }, { lat: -32.22641015009755, lng: -54.14603550863859 }, { lat: -32.22657351851785, lng: -54.14630909395811 }, { lat: -32.22679134262149, lng: -54.147199587351054 }, { lat: -32.227508343275304, lng: -54.14999444914457 }, { lat: -32.22760817836076, lng: -54.15020366144773 }, { lat: -32.228197788789686, lng: -54.15088657404033 }, { lat: -32.228388703430426, lng: -54.151137070184916 }],
        mapa_posicion_inicial: { lat: -32.22929464848747, lng: -54.14705506574789 },
        mapa_zoom: 16
    },
    {
        // Melo, Cerro Largo
        mapa_perimetro: [{ lat: -32.3690208943381, lng: -54.183649621007156 }, { lat: -32.36896652374451, lng: -54.182941517827224 }, { lat: -32.36922025290143, lng: -54.18176134586067 }, { lat: -32.3678156718415, lng: -54.1815682268116 }, { lat: -32.367213054567294, lng: -54.177920422551345 }, { lat: -32.36679167318444, lng: -54.176450572011184 }, { lat: -32.366592309264995, lng: -54.17601068973274 }, { lat: -32.366773549209924, lng: -54.17586048602791 }, { lat: -32.3656498556942, lng: -54.17437990665169 }, { lat: -32.36294930932135, lng: -54.17234142780037 }, { lat: -32.361916193068296, lng: -54.171204171178054 }, { lat: -32.36168056841005, lng: -54.170474610326 }, { lat: -32.36104619127814, lng: -54.17034586429329 }, { lat: -32.3604480601915, lng: -54.16882236957283 }, { lat: -32.35894365239229, lng: -54.16854341983528 }, { lat: -32.35580787857565, lng: -54.16824301242561 }, { lat: -32.34984417056332, lng: -54.1685648775074 }, { lat: -32.34971879340441, lng: -54.16852084052172 }, { lat: -32.34945594579818, lng: -54.16506615531054 }, { lat: -32.349537519274946, lng: -54.16385379683581 }, { lat: -32.349474073243826, lng: -54.1631135071477 }, { lat: -32.349619092678175, lng: -54.16263070952502 }, { lat: -32.34987287612885, lng: -54.161750944968134 }, { lat: -32.35068860382661, lng: -54.15876832854357 }, { lat: -32.35217502204937, lng: -54.15453043830004 }, { lat: -32.35581845607802, lng: -54.15628996741381 }, { lat: -32.36016863280971, lng: -54.15562477957812 }, { lat: -32.36085739160186, lng: -54.15465918433276 }, { lat: -32.36009613157902, lng: -54.15240612876025 }, { lat: -32.35986050217783, lng: -54.15109721076098 }, { lat: -32.35980612607498, lng: -54.14792147528735 }, { lat: -32.35957049591808, lng: -54.14631214987841 }, { lat: -32.36265176486852, lng: -54.14157000434008 }, { lat: -32.363286130735496, lng: -54.140003594275385 }, { lat: -32.36473609314619, lng: -54.137020977850824 }, { lat: -32.36689286920939, lng: -54.136269959326654 }, { lat: -32.368161536974846, lng: -54.1360982979497 }, { lat: -32.36919458186024, lng: -54.13603392493334 }, { lat: -32.37037260109354, lng: -54.136227043982416 }, { lat: -32.37207617098282, lng: -54.13633433234301 }, { lat: -32.375773169645534, lng: -54.13691368949023 }, { lat: -32.37890825098015, lng: -54.137278469916254 }, { lat: -32.37963310979502, lng: -54.14137688529101 }, { lat: -32.380158628799585, lng: -54.14393034827319 }, { lat: -32.38048481147195, lng: -54.144702824469476 }, { lat: -32.38289490249979, lng: -54.144466790076166 }, { lat: -32.383239195969765, lng: -54.144016178961664 }, { lat: -32.38410898415468, lng: -54.1425999726018 }, { lat: -32.384435152565025, lng: -54.14184895407763 }, { lat: -32.38401838160947, lng: -54.14133396994677 }, { lat: -32.384435152565025, lng: -54.140497120734125 }, { lat: -32.38740685494786, lng: -54.14302912604418 }, { lat: -32.38527774884109, lng: -54.14832917105761 }, { lat: -32.38523244816595, lng: -54.14886561286059 }, { lat: -32.38227692798627, lng: -54.15407982718554 }, { lat: -32.38600974955609, lng: -54.153253706808954 }, { lat: -32.386317791048455, lng: -54.15402618300524 }, { lat: -32.384179599030126, lng: -54.15451970946398 }, { lat: -32.38407087604997, lng: -54.15630069624987 }, { lat: -32.38528494190096, lng: -54.15642944228259 }, { lat: -32.387078830231964, lng: -54.15559259306994 }, { lat: -32.38745934741928, lng: -54.15660110365954 }, { lat: -32.385647346455464, lng: -54.15752378356066 }, { lat: -32.38579230787015, lng: -54.15878978621569 }, { lat: -32.38648087141327, lng: -54.160248907919794 }, { lat: -32.38925319256819, lng: -54.160248907919794 }, { lat: -32.38952498417984, lng: -54.161471995230585 }, { lat: -32.38954310359154, lng: -54.16415420424548 }, { lat: -32.389398148196186, lng: -54.166214140768915 }, { lat: -32.388184137627235, lng: -54.1665360058507 }, { lat: -32.386263430861426, lng: -54.16780200850573 }, { lat: -32.38147569126814, lng: -54.174231438237165 }, { lat: -32.37795818582537, lng: -54.17602994674301 }, { lat: -32.377140746523295, lng: -54.17716326741318 }, { lat: -32.377140746523295, lng: -54.17714180974106 }, { lat: -32.376932344461366, lng: -54.17835416821579 }, { lat: -32.37589032694235, lng: -54.17980256108383 }, { lat: -32.37489360328963, lng: -54.18086471585373 }, { lat: -32.37409621645233, lng: -54.181476259509125 }, { lat: -32.37315384111944, lng: -54.181712293902436 }, { lat: -32.373117386947946, lng: -54.181769106790206 }],
        mapa_posicion_inicial: { lat: -32.36909822222193, lng: - 54.164469394439635 },
        mapa_zoom: 14
    }
];

var GMaps_lista_mapas_initPos = [
    { lat: -32.22765760461139, lng: -54.14543190267292 },
    { lat: -34.37362213219502, lng: -56.17024779361325 }
];

var GMaps_ddl_mapas = [
    //'Seleccionar Mapa',
    'La Capelina', 
    'Ciudad de Melo' 
];

// Crear polígonos en mapas: http://apps.headwallphotonics.com/

var posicion_inicial = { lat: -32.22765760461139, lng: -54.14543190267292 }
var GMap_polygon_base;

// Zonas relevantes de campo de taladro
var GMap_polygon_estanque1, GMap_polygon_estanque2, GMap_polygon_bosque1, GMap_polygon_bosque2, GMap_polygon_potrero1, GMap_polygon_potrero2, GMap_polygon_potrero3, GMap_polygon_potrero4, GMap_polygon_potrero5, GMap_polygon_potrero6;
var zonas_Potrero1_cantidad = zonas_Potrero2_cantidad = zonas_Potrero3_cantidad = zonas_Potrero4_cantidad = zonas_Potrero5_cantidad = zonas_Potrero6_cantidad = 0;
var zonas_Total_cantidad = 0;

var GMaps_listaMarcadores = [];
var GMaps_listaMarcadoresSeleccionado_index = -1;
var GMaps_listaMarcadoresSeleccionado_iconoOriginal;
var GMaps_alarma_tarjetaSeleccionada_ID = 0;
var GMaps_alarma_tarjetaSeleccionada_colorOriginal = "#f3d3d3";

// Evento inicial de la página
$(document).ready(function () {
    cargar_listaMapas();
    iniciarMapa(0); // Dibuja el mapa
    cargar_eventos();

    iniciarThreadRefresque();
});

// Importante: es necesario seguir cargando el resto de los controles y los nodos, luego de cargado 100% Google maps - Probar en el Callback de la API GMaps
function ejecucion_postGoogleMaps() {
    setTimeout(function () {
        // Inicia marcadores luego de cargar todo
        getNodosActivos();
        actualizarNotificacionesAlarmas();

        if (isMobile()) {
            // Si es mobile ajusta la visual del mapa y su contenido
            $("#GMaps_map_ID").css("height", "450px");
            $("#divContenedorGMaps").css("min-height", "unset");
            $(".panel-group").css("max-width", "30%");
            $(".potrero_value").css("font-size", "0.9rem");
            $(".panel-heading").css("padding", "3px 5px");
        }
    }, 1000); // 1 segundo

    if (isMobile()) {
        setTimeout(function () {
            $("#divZonas_TotalTitulo").text("Total:");

            GMaps_goFullscreen(); // Google maps fullscreen
        }, 2000); // 2 segundos
    }
}

function resetMap(mapa_index) {
    quitarMarcadores();
    iniciarMapa(mapa_index);
}

function cargar_listaMapas() {
    var ddlListaMapas = $('#ddlListaMapas');
    $.each(GMaps_ddl_mapas, function (val) {
        ddlListaMapas.append(
            $('<option></option>').val(val).html(GMaps_ddl_mapas[val])
        );
    });
}

function cargar_controlesEnMapa_alarmas() {
    // (*EN DESUSO*)
    //var liAlarmasTarjetas_control = $('<li id="liAlarmasTarjetas" style="margin: 20px;" role="presentation" class="nav-item dropdown open"> <a href="javascript:;" class="dropdown-toggle info-number" id="navbarDropdown1" data-toggle="dropdown" aria-expanded="false"> <h4><i class="fa fa-envelope-o"></i> <span id="alarmas_tarjetas_count" class="badge bg-success" style="">0</span> </a></h4> <ul id="alarmas_tarjetas" style="width:max-content" class="dropdown-menu list-unstyled msg_list" role="menu" aria-labelledby="navbarDropdown1"> </ul> </li>');

    var liAlarmasTarjetas_control = $('<div class="accordion panel-style" style="max-width: 50%;" id="accAlarmas"> <div class="accordion-item"> <h2 class="accordion-header" id="headingAlarmas"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collAlarmas" aria-expanded="false" aria-controls="collAlarmas"> <span id="alarmas_tarjetas_count" class="badge bg-success">0</span> </button> </h2>  <div id="collAlarmas" class="accordion-collapse collapse" aria-labelledby="headingAlarmas" data-bs-parent="#accAlarmas"> <li id="alarmas_tarjetas" class="accordion-body  list-unstyled msg_list"> </li> </div> </div> </div>');
    GMaps_map.controls[google.maps.ControlPosition.RIGHT_TOP].push(liAlarmasTarjetas_control[0]);
}

function cargar_controlesEnMapa_panel() {
    var divGMaps_Zonas_control = $('<div class="accordion panel-style" id="accPaneles"> <div class="accordion-item"> <h2 class="accordion-header" id="headingOne"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collPaneles" aria-expanded="false" aria-controls="collPaneles"> <span id="divZonas_TotalTitulo" class="potrero_value">Total animales:</span><span id="divZonas_Total" class="potrero_value">0</span></button> </h2> </div> </div>');
        
    // Si es el campo de taladro *Hardcodeado*
    if (GMaps_mapa_seleccionado === 0) {
        // S: https://www.jquery-az.com/boots/demo.php?ex=53.0_5
        // S: https://getbootstrap.com/docs/5.0/components/accordion/
        divGMaps_Zonas_control = $('<div class="accordion panel-style" id="accPaneles"> <div class="accordion-item"> <h2 class="accordion-header" id="headingOne"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collPaneles" aria-expanded="false" aria-controls="collPaneles"> <span id="divZonas_TotalTitulo" class="potrero_value">Total animales:</span><span id="divZonas_Total" class="potrero_value">0</span> </button> </h2> <div id="collPaneles" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accPaneles"> <div class="accordion-body"> <span class="potrero_title">Potrero 1:</span><span id="divZonas_Potrero1" class="potrero_value">0</span> <hr />  <span class="potrero_title">Potrero 2:</span><span id="divZonas_Potrero2" class="potrero_value">0</span> <hr />  <span class="potrero_title">Potrero 3:</span><span id="divZonas_Potrero3" class="potrero_value">0</span> <hr />  <span class="potrero_title">Potrero 4:</span><span id="divZonas_Potrero4" class="potrero_value">0</span> <hr />  <span class="potrero_title">Potrero 5:</span><span id="divZonas_Potrero5" class="potrero_value">0</span> <hr />  <span class="potrero_title">Potrero 6:</span><span id="divZonas_Potrero6" class="potrero_value">0</span> <hr />  </div> </div> </div> </div>');
    }
    GMaps_map.controls[google.maps.ControlPosition.LEFT_TOP].push(divGMaps_Zonas_control[0]);
}


function cargar_eventos() {
    // Evento: cambia la selección de la ddl Mapa
    $('#ddlListaMapas').change(function () {
        var map_index = TryParseInt($(this).val(), 0);
        if (GMaps_lista_mapas[map_index] !== null && GMaps_lista_mapas[map_index] !== undefined) {
            GMaps_mapa_coordenadas = GMaps_lista_mapas[map_index].mapa_perimetro;

            if (map_index === 0) {
                // Mostrar panel Zonas relevantes
                $("#divGMaps_Zonas").show();
                $("#divGMaps_Mapa").addClass("col-xs-11 col-sm-11 col-md-11");
                $("#divGMaps_Mapa").removeClass("col-xs-12 col-sm-12 col-md-12");
            } else {
                // Ocultar panel Zonas relevantes
                $("#divGMaps_Zonas").hide();
                $("#divGMaps_Mapa").removeClass("col-xs-11 col-sm-11 col-md-11");
                $("#divGMaps_Mapa").addClass("col-xs-12 col-sm-12 col-md-12");
            }
        }
        GMaps_mapa_seleccionado = map_index;
        resetMap(map_index);
        getNodosActivos();
    });

    $('#checkAutocorregirPosicion').change(function () {
        GMaps_mapa_autoCorregirPosicion = this.checked;
    });
}

// Inicia thread cada 20 segs por defecto - refresca los nodos automáticamente
function iniciarThreadRefresque() {
    var txtDelay = $("#txtDelay").val();
    if (txtDelay !== null && txtDelay !== undefined) {
        var delay_int = TryParseInt(txtDelay, 20);
        if (delay_int === 0) {
            alert("Ingreso inválido.");
        } else {
            clearInterval(GMaps_update_thread);
            GMaps_update_thread = setInterval(getNodosActivos, (delay_int * 1000));
            //GMaps_update_thread = setInterval(getNodosActivos, (delay_int * 1000));
        }
    }
    else {
        alert("Ingreso inválido.");
    }
}

// Dibujar área en mapa | Ojo con el orden de los datos en el array Lat y Long
function iniciarMapa(map_index) {
    if (map_index !== null && map_index !== undefined) {
        // Ubicación del mapa
        GMaps_map = new google.maps.Map(document.getElementById("GMaps_map_ID"), {
            center: GMaps_lista_mapas[map_index].mapa_posicion_inicial,
            zoom: GMaps_lista_mapas[map_index].mapa_zoom,
            mapTypeId: 'satellite',
            disableDefaultUI: true,
            fullscreenControl: true,
            fullscreenControlOptions: {
                position: google.maps.ControlPosition.RIGHT_BOTTOM,
            },
        });

        // Dibuja el mapa base seleccionado
        GMap_polygon_base = new google.maps.Polygon({
            paths: GMaps_lista_mapas[map_index].mapa_perimetro,
            strokeColor: 'rgb(8, 47, 104)',
            strokeOpacity: 1,
            strokeWeight: 3,
            fillColor: 'rgba(12, 98, 189, 0.47)',
            fillOpacity: 0.24,
        });

        // Agregar antena Gateway en mapa
        agregarNodoAntenaGW(GMaps_map);

        // Evento: si se hace click en el mapa, se quitan los marcadores seleccionados ***NOT WORKING: El click lo toma el área de arriba, o sea, los perímetros***
        GMap_polygon_base.addListener("click", () => {
            quitarSeleccionMarcador();
        });
        GMap_polygon_base.setMap(GMaps_map);        

        // Cargar alarmas en mapa
        cargar_controlesEnMapa_alarmas();

        // Cargar paneles potreros en mapa
        cargar_controlesEnMapa_panel();

        // Si es el campo de taladro *Hardcodeado*
        if (GMaps_mapa_seleccionado === 0) {
            DibujarZonas_mapa_taladro();
        } // GMaps_mapa_seleccionado = 0 - Campo taladro
    }
}

// Si es el campo de taladro *Hardcodeado*
function DibujarZonas_mapa_taladro() {
    // Dibuja las zonas del mapa seleccionado
    /*
    GMap_polygon_bosque1 = new google.maps.Polygon({
        paths: Estancia_taladro_bosque1,
        strokeColor: 'rgb(246, 232, 68)',
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: 'rgb(246, 232, 68)',
        fillOpacity: 0.3,
    });
    GMap_polygon_bosque1.setMap(GMaps_map);
    
    GMap_polygon_bosque2 = new google.maps.Polygon({
        paths: Estancia_taladro_bosque2,
        strokeColor: 'rgb(246, 232, 68)', // Amarillo
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: 'rgb(246, 232, 68)', // Amarillo
        fillOpacity: 0.3,
    });
    GMap_polygon_bosque2.setMap(GMaps_map);
    */

    //
    GMap_polygon_estanque1 = new google.maps.Polygon({
        paths: Estancia_taladro_estanque1,
        strokeColor: 'rgb(246, 232, 68)', // Amarillo
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: 'rgb(246, 232, 68)', // Amarillo
        fillOpacity: 0.2,
    });
    GMap_polygon_estanque1.setMap(GMaps_map);

    GMap_polygon_estanque2 = new google.maps.Polygon({
        paths: Estancia_taladro_estanque2,
        strokeColor: 'rgb(246, 232, 68)', // Amarillo
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: 'rgb(246, 232, 68)', // Amarillo
        fillOpacity: 0.2,
    });
    GMap_polygon_estanque2.setMap(GMaps_map);

    GMap_polygon_estanque3 = new google.maps.Polygon({
        paths: Estancia_taladro_estanque3,
        strokeColor: 'rgb(246, 232, 68)', // Amarillo
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: 'rgb(246, 232, 68)', // Amarillo
        fillOpacity: 0.2,
    });
    GMap_polygon_estanque3.setMap(GMaps_map);

    // Potreros ************************************************
    GMap_polygon_potrero1 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero1,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero1.setMap(GMaps_map);

    GMap_polygon_potrero2 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero2,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero2.setMap(GMaps_map);

    GMap_polygon_potrero3 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero3,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero3.setMap(GMaps_map);

    GMap_polygon_potrero4 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero4,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero4.setMap(GMaps_map);

    GMap_polygon_potrero5 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero5,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero5.setMap(GMaps_map);

    GMap_polygon_potrero6 = new google.maps.Polygon({
        paths: Estancia_taladro_potrero6,
        strokeColor: 'rgb(8, 47, 104)',
        strokeOpacity: 1,
        strokeWeight: 3,
        fillOpacity: 0,
    });
    GMap_polygon_potrero6.setMap(GMaps_map);
}

// Cargar ubicación del GW *Hardcodeado*
function agregarNodoAntenaGW(GMaps_map) {
    var icono = {
        url: GMaps_marcador_antena,
        scaledSize: new google.maps.Size(40, 40), // scaled size
        origin: new google.maps.Point(0, 0), // origin
        anchor: new google.maps.Point(20, 20) // anchor
    };

    var marcador = new google.maps.Marker({
        position: GMaps_GW_coordenadas,
        map: GMaps_map,
        title: "Antena_GW",
        icon: icono,
        nodo_ID: 1
    });
    GMaps_listaMarcadores.push(marcador);
}

function quitarMarcadores() {
    actualizarMarcadores(null);
    GMaps_listaMarcadores = [];

    zonas_Total_cantidad = 0;
    zonas_Potrero1_cantidad = zonas_Potrero2_cantidad = zonas_Potrero3_cantidad = zonas_Potrero4_cantidad = zonas_Potrero5_cantidad = zonas_Potrero6_cantidad = 0;

    $("#divZonas_Total").text(0);

    // Si es el campo de taladro *Hardcodeado*
    if (GMaps_mapa_seleccionado === 0) {
        $("#divZonas_Potrero1").text(0);
        $("#divZonas_Potrero2").text(0);
        $("#divZonas_Potrero3").text(0);
        $("#divZonas_Potrero4").text(0);
        $("#divZonas_Potrero5").text(0);
        $("#divZonas_Potrero6").text(0);
    } else {
        agregarNodoAntenaGW(GMaps_map);
    }
}

function actualizarMarcadores(map) {
    for (let i = 0; i < GMaps_listaMarcadores.length; i++) {
        GMaps_listaMarcadores[i].setMap(map);
    }
}

function checkZonasRelevantes(nodo_posicion, nodo_info) {
    if (nodo_posicion !== null && nodo_posicion !== undefined && nodo_info !== null && nodo_info !== undefined) {
        var saltar = false;
        var point = new google.maps.LatLng(nodo_posicion.lat, nodo_posicion.lng);

        // Check zonas
        // Estancia_taladro_potrero1
        saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero1) ? true : false;
        if (saltar) {
            zonas_Potrero1_cantidad++;
            $("#divZonas_Potrero1").text(zonas_Potrero1_cantidad);
        }

        if (!saltar) {
            saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero2) ? true : false;
            if (saltar) {
                zonas_Potrero2_cantidad++;
                $("#divZonas_Potrero2").text(zonas_Potrero2_cantidad);
            }
        }

        if (!saltar) {
            saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero3) ? true : false;
            if (saltar) {
                zonas_Potrero3_cantidad++;
                $("#divZonas_Potrero3").text(zonas_Potrero3_cantidad);
            }
        }

        if (!saltar) {
            saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero4) ? true : false;
            if (saltar) {
                zonas_Potrero4_cantidad++;
                $("#divZonas_Potrero4").text(zonas_Potrero4_cantidad);
            }
        }

        if (!saltar) {
            saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero5) ? true : false;
            if (saltar) {
                zonas_Potrero5_cantidad++;
                $("#divZonas_Potrero5").text(zonas_Potrero5_cantidad);
            }
        }

        if (!saltar) {
            saltar = google.maps.geometry.poly.containsLocation(point, GMap_polygon_potrero6) ? true : false;
            if (saltar) {
                zonas_Potrero6_cantidad++;
                $("#divZonas_Potrero6").text(zonas_Potrero6_cantidad);
            }
        }
    }
}

/*
codigo_alarma:
0 - Todo OK
1 - Afuera del predio
2 - Adentro de estanque
3 - Adentro de bosque
*/
function checkAlarmas(nodo_posicion, nodo_info) {
    if (nodo_posicion !== null && nodo_posicion !== undefined && nodo_info !== null && nodo_info !== undefined) {
        var codigo_alarma = 0;
        var saltar = false;
        var point = new google.maps.LatLng(nodo_posicion.lat, nodo_posicion.lng);

        // Check límites
        codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_base) ? 0 : 1;
        if (codigo_alarma === 1) {
            saltar = true;
        }

        // Si es el campo de taladro *Hardcodeado*
        if (GMaps_mapa_seleccionado === 0) {

            if (!saltar) {
                // Check zonas
                // GMap_polygon_estanque1
                codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_estanque1) ? 2 : 0;
                if (codigo_alarma === 2) {
                    saltar = true;
                }

                // GMap_polygon_estanque2
                if (!saltar) {
                    codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_estanque2) ? 2 : 0;
                    if (codigo_alarma === 2) {
                        saltar = true;
                    }
                }

                // GMap_polygon_estanque3
                if (!saltar) {
                    codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_estanque3) ? 2 : 0;
                    if (codigo_alarma === 2) {
                        saltar = true;
                    }
                }

                // GMap_polygon_bosque1
                /*
                if (!saltar) {
                    codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_bosque1) ? 3 : 0;
                    if (codigo_alarma === 3) {
                        saltar = true;
                    }
                }
                // GMap_polygon_bosque2
                if (!saltar) {
                    codigo_alarma = google.maps.geometry.poly.containsLocation(point, GMap_polygon_bosque2) ? 3 : 0;
                    if (codigo_alarma === 3) {
                        saltar = true;
                    }
                }
                **/
            }
        }
        else {
            agregarNodoAntenaGW(GMaps_map);
        }
        return codigo_alarma;
    }
}

/*
codigo_alarma:
0 - Todo OK
1 - Afuera del predio
2 - Adentro de estanque
3 - Adentro de bosque
*/

// Agrega nodo y chequea alarmas
function agregarMarcador(nodo_posicion, nodo_info, animal_info, cliente_info, isModoCompleto = true) {
    if (nodo_posicion !== null && nodo_posicion !== undefined) {
        var alarma_mensaje = "Fuera del predio";
        var alarma_color = "#f3d3d3";

        var marcador_color = GMaps_marcador_verde_URL + nodo_info.Numeracion + ".png";
        if (!imageExists(marcador_color)) {
            marcador_color = GMaps_marcador_verde;
        }

        // Si es el campo de taladro *Hardcodeado*
        if (GMaps_mapa_seleccionado === 0) {
            // Check zonas relevantes
            checkZonasRelevantes(nodo_posicion, nodo_info);
        }

        // Check alarmas
        var codigo_alarma = checkAlarmas(nodo_posicion, nodo_info);
        if (codigo_alarma !== null && codigo_alarma !== undefined) {
            switch (codigo_alarma) {
                case 1:
                    {
                        // indico la numeración para cargar el png correspondiente
                        marcador_color = GMaps_marcador_rojo_URL + nodo_info.Numeracion + ".png";
                        if (!imageExists(marcador_color)) {
                            marcador_color = GMaps_marcador_rojo;
                        }
                        alarma_mensaje = "Fuera del predio";
                        break;
                    }
                case 2:
                    {
                        marcador_color = GMaps_marcador_amarillo_URL + nodo_info.Numeracion + ".png";
                        if (!imageExists(marcador_color)) {
                            marcador_color = GMaps_marcador_amarillo;
                        }
                        alarma_mensaje = "Adentro de un estanque";
                        break;
                    }
                case 3:
                    {
                        marcador_color = GMaps_marcador_amarillo_URL + nodo_info.Numeracion + ".png";
                        if (!imageExists(marcador_color)) {
                            marcador_color = GMaps_marcador_amarillo;
                        }
                        alarma_mensaje = "Adentro de un bosque";
                        alarma_color = "rgb(246, 232, 68, 0.47)";
                        break;
                    }
            }
        }

        var icono = {
            url: marcador_color,
            scaledSize: new google.maps.Size(40, 40), // scaled size
            origin: new google.maps.Point(0, 0), // origin
            anchor: new google.maps.Point(20, 20) // anchor
        };

        var marcador = new google.maps.Marker({
            position: nodo_posicion,
            map: GMaps_map,
            title: nodo_info.Device_Name,
            icon: icono,
            nodo_ID: "Nodo_" + nodo_info.Device_ID
        });
        GMaps_listaMarcadores.push(marcador);

        var marcador_panelDatos_html =
            '<div id="content">' +
            '<h3 id="firstHeading" class="firstHeading">' + nodo_info.Device_Name + '</h3>' +
            '<div id="bodyContent">';

        // Datos del cliente
        marcador_panelDatos_html += '<div class="accordion" id="accPanelCliente"> <div class="accordion-item"> <h2 class="accordion-header" id="headCliente"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collPanelCliente" aria-expanded="false" aria-controls="collPanelCliente"> <span class="">Cliente</span> </button> </h2>';

        if (isModoCompleto) {
            marcador_panelDatos_html += '<div id="collPanelCliente" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accPanelCliente"> <div class="accordion-body">';
            marcador_panelDatos_html += "Cliente: " + cliente_info.Nombre_cliente + "<br>" +
                "Estancia: " + cliente_info.Nombre_estancia + "<br>" +
                "Campo: " + cliente_info.Nombre_estancia_campo + "<br>";
            marcador_panelDatos_html += '</div></div>';
        }
        marcador_panelDatos_html += '</div></div>';

        // Datos del animal
        marcador_panelDatos_html += '<div class="accordion" id="accPanelAnimal"> <div class="accordion-item"> <h2 class="accordion-header" id="headAnimal"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collPanelAnimal" aria-expanded="false" aria-controls="collPanelAnimal"> <span class="">Animal</span> </button> </h2>';

        if (isModoCompleto) {
            marcador_panelDatos_html += '<div id="collPanelAnimal" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accPanelAnimal"> <div class="accordion-body">';
            marcador_panelDatos_html += "Caravana MGAP: " + animal_info.Caravana_MGAP_ID + "<br>" +
                "Animal: " + animal_info.Tipo_animal + "<br>" +
                "Categoría: " + animal_info.Categoria + "<br>" +
                "Raza: " + animal_info.Raza + "<br>" +
                "Sexo M/H: " + animal_info.Sexo_MH + "<br>" +
                "Edad: " + animal_info.Edad + "<br>";
            marcador_panelDatos_html += '</div></div>';
        }
        marcador_panelDatos_html += '</div></div>';

        // Datos del nodo
        marcador_panelDatos_html += '<div class="accordion" id="accPanelNodo"> <div class="accordion-item"> <h2 class="accordion-header" id="headNodo"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collPanelNodo" aria-expanded="false" aria-controls="collPanelNodo"> <span class="">Nodo</span> </button> </h2>';

        if (isModoCompleto) {
            marcador_panelDatos_html += '<div id="collPanelNodo" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accPanelNodo"> <div class="accordion-body">';
            marcador_panelDatos_html += "Payload_ID = " + nodo_info.Payload_ID + "<br>" +
                "Device_ID = " + nodo_info.Device_ID + "<br>" +
                "Antena = " + nodo_info.Gateway + "<br>" +
                "Alt = " + nodo_info.Alt + "<br>" +
                "Latitud = " + nodo_info.Latitud + "<br>" +
                "Longitud = " + nodo_info.Longitud + "<br>" +
                "Última actualización = " + nodo_info.Datetime_Fin + "<br>";
            marcador_panelDatos_html += '</div></div>';
        }
        marcador_panelDatos_html += '</div></div>';

        // Botones
        marcador_panelDatos_html += "<div class='row input-group-btn' style='padding:10px;'>" +
            "<span class='input-group-btn'><a role='button' href='#' title='Ver recorrido histórico' name='search' class='btn btn-primary' data-toggle='modal' data-target='#GMaps_map_recorrido_modal_ID' onclick='modal_GMaps_recorrido(\"" + nodo_info.Device_Name + "\")' style='margin-left: 5px;'><i class='bi bi-clock-history'></i></a></span>" +
            "</div>";

        //'<p><a href="http://chevaca.uy?nodoID="' + nodo_info.Payload_ID + '>' +
        //"Ver más información.</a> " +
        //    "</p>" +
        //    "</div>" +
        //    "</div>";


        // Evento click en el nodo
        marcador.addListener("click", () => {

            // Popup info del nodo: si está abierto, lo cierra
            if (infowindow) {
                infowindow.close();
            }

            // Popup info del nodo: carga contenido
            infowindow = new google.maps.InfoWindow({
                content: marcador_panelDatos_html
            });

            // Popup info del nodo: muestra popup
            infowindow.open(GMaps_map, marcador);
            seleccionarMarcador(nodo_info.Device_ID);
        });

        if (codigo_alarma !== 0) { // Si hay alarma
            // Check si el nodo ya está ingresado en la lista de alarmas, si no está, agrega la alarma
            var nodo_index = jQuery.inArray(nodo_info.Device_ID, GMaps_lista_nodos_alarmas_ID);
            if (nodo_index !== null && nodo_index !== undefined && nodo_index === -1) {
                agregarAlarma(nodo_info, alarma_mensaje, marcador_color, alarma_color);
            }
        }
    }
}

function seleccionarMarcador(device_ID) {
    if (device_ID !== null && device_ID !== undefined) {
        // Actualiza tarjeta de alarma seleccionada
        if (GMaps_alarma_tarjetaSeleccionada_ID !== 0) {
            $("#alarmaTarjeta_" + GMaps_alarma_tarjetaSeleccionada_ID).css("background-color", GMaps_alarma_tarjetaSeleccionada_colorOriginal); 
        }
        $("#alarmaTarjeta_" + device_ID).css("background-color", "#96c6ed")
        GMaps_alarma_tarjetaSeleccionada_ID = device_ID;

        // Actualiza marcador seleccionado
        GMaps_listaMarcadores.forEach(function (item, index) {
            if (item.nodo_ID === "Nodo_" + device_ID) {

                // Si existe algún marcador seleccionado, lo pone con valores previos a ser seleccionado (lo limpia)
                if (GMaps_listaMarcadoresSeleccionado_index !== -1) {
                    GMaps_listaMarcadores[GMaps_listaMarcadoresSeleccionado_index].setIcon(GMaps_listaMarcadoresSeleccionado_iconoOriginal);
                }

                // Respaldo ícono original que voy a cambiar
                GMaps_listaMarcadoresSeleccionado_iconoOriginal = GMaps_listaMarcadores[index].getIcon();

                // Actualiza seleccionado
                GMaps_listaMarcadoresSeleccionado_index = index; 

                var icono = {
                    url: GMaps_marcador_seleccionado,
                    scaledSize: new google.maps.Size(45, 45), // scaled size
                    origin: new google.maps.Point(0, 0), // origin
                    anchor: new google.maps.Point(20, 20) // anchor
                };
                item.setIcon(icono);
                // Google Maps api doc - Source: https://developers.google.com/maps/documentation/javascript/reference/marker#Marker.setIcon
            }
        });
    }
}

// Se quitan los marcadores seleccionados
function quitarSeleccionMarcador() {
    // Actualiza tarjeta de alarma seleccionada
    if (GMaps_alarma_tarjetaSeleccionada_ID !== 0) {
        $("#alarmaTarjeta_" + GMaps_alarma_tarjetaSeleccionada_ID).css("background-color", GMaps_alarma_tarjetaSeleccionada_colorOriginal);
        GMaps_alarma_tarjetaSeleccionada_ID = 0;
    }

    // Si existe algún marcador seleccionado, lo pone con valores previos a ser seleccionado (lo limpia)
    if (GMaps_listaMarcadoresSeleccionado_index !== -1) {
        GMaps_listaMarcadores[GMaps_listaMarcadoresSeleccionado_index].setIcon(GMaps_listaMarcadoresSeleccionado_iconoOriginal);
        GMaps_listaMarcadoresSeleccionado_index = -1;
    }
}

// Agrega la tarjeta de alarma en las notificaciones, una por cada nodo que requiera
function agregarAlarma(nodo_info, alarma_mensaje, marcador_color, alarma_color) {
    if (nodo_info !== null && nodo_info !== undefined && nodo_info.Device_ID !== null && nodo_info.Device_ID !== undefined) {
        GMaps_lista_nodos_alarmas_ID.push(nodo_info.Device_ID);
        var time_ago = moment.duration(moment().diff(nodo_info.Datetime_Fin, 'minutes', true));
        var time_minutes_ago = 0;
        if (time_ago !== null && time_ago !== undefined && time_ago._data !== null && time_ago._data !== undefined) {
            time_minutes_ago = Math.round(time_ago._data.seconds) * (-1);
        }

        var alarma_tarjeta = '<li id="alarmaTarjeta_' + nodo_info.Device_ID + '" class="nav-item" style="background-color:' + alarma_color + '">' +
            '<a class="dropdown-item" onclick="seleccionarMarcador(' + nodo_info.Device_ID + ')" > ' +
            '<span class="image"><img style="max-width:40px;" src="' + marcador_color + '" alt="Chevaca Agrotecnología" /></span>' +
            '<span>' +
            '<span style="font-weight:bold">' + alarma_mensaje + '</span>' +
            '<span class="time">' + time_minutes_ago + ' segundos atrás</span>' +
            '</span> <br>' +
            '<span class="message" style="white-space: normal;">' +
            'El animal ' + nodo_info.Device_Name + ' (ID=' + nodo_info.Device_ID + ') salió del predio a las ' + nodo_info.Datetime_Fin + '.' +
            '</span>' +
            '</a >' +
            '</li >';

        $("#alarmas_tarjetas").append(alarma_tarjeta);
    }
}

function modal_GMaps_recorrido(nodo_nombre) {
    // Si está en fullscreen, sale
    GMaps_exitFullscreen();
    
    $("#txtNodo_nombre").val(nodo_nombre);
    $("#GMaps_map_recorrido_modal_ID_modal").modal('show');

    //$("#GMaps_map_recorrido_modal_ID").show();

    init_recorrido();
}

// Trae los nodos de la Base de datos, modo completo = nodos, animales y cliente
function getNodosActivos() {
    // Ajax call parameters
    console.log("Ajax call: /Board/Dashboard/GetNodosActivos. Params:");

    // Ejemplo: https://www.yogihosting.com/jquery-ajax-aspnet-core/
    // https://stackoverflow.com/questions/26371688/asp-net-mvc-ajax-post-returns-404-not-found
    $.ajax({
        type: "POST",
        url: "/Board/Dashboard/GetNodosActivos",
        contentType: "application/json; charset=utf-8",
        data: "{ 'dummy':'' }",
        success: function (response) {
            if (response !== null && response !== undefined) {
                if (response.item1.length > 0) {
                    console.log("---- Resultados: " + response.item1.length);

                    // isModo = completo o solo nodos
                    // item1: Lista de tuplas (nodo, animal)
                    // item2: Objeto cliente
                    // item3: flag isCompleto
                    colocarMarcadores(response.item1, response.item2, response.item3);
                } else {
                    console.log("---- Resultados: 0");
                    quitarMarcadores();
                    clearAlarmas();
                }
            } else {
                console.log("---- Resultados: NULL");
            }
        }, // end success
        failure: function (response) {
                console.log("---- Resultados: ERROR");
        }
    }); // Ajax    
}

function clearAlarmas() {
    GMaps_lista_nodos_alarmas_ID = [];
    $("#alarmas_tarjetas").empty();
    $("#alarmas_tarjetas_count").text("0");
}

function colocarMarcadores(array_nodos_animales, objeto_cliente, isModoCompleto = true) {
    if (array_nodos_animales.length > 0) {

        quitarMarcadores(); // Borro marcadores del mapa
        clearAlarmas(); // GMaps_lista_nodos_alarmas_ID

        zonas_Total_cantidad = array_nodos_animales.length;
        $("#divZonas_Total").text(array_nodos_animales.length);

        GMaps_lista_nodos = array_nodos_animales; // Actualizo lista de nodos

        // Variables cliente - datos únicos para todos los nodos
        var Landlord_ID, Land_ID, Land_farm_ID, Land_farm_ID, Nombre_cliente, Nombre_estancia, Nombre_estancia_campo;

        if (isModoCompleto) {
            // Datos del cliente
            if (objeto_cliente != null) {
                Landlord_ID = check_nullValues(objeto_cliente.landlord_ID);
                Land_ID = check_nullValues(objeto_cliente.land_ID);
                Land_farm_ID = check_nullValues(objeto_cliente.land_farm_ID);
                Nombre_cliente = check_nullValues(objeto_cliente.client_fullname);
                Nombre_estancia = check_nullValues(objeto_cliente.land_name);
                Nombre_estancia_campo = check_nullValues(objeto_cliente.land_farm_name);

                console.log("");
                console.log("DATOS CLIENTE");
                console.log("Landlord_ID , type: " + type(Landlord_ID) + ", value: " + Landlord_ID);
                console.log("Land_ID, type: " + type(Land_ID) + ", value: " + Land_ID);
                console.log("Land_farm_ID, type: " + type(Land_farm_ID) + ", value: " + Land_farm_ID);
                console.log("Nombre_cliente, type: " + type(Nombre_cliente) + ", value: " + Nombre_cliente);
                console.log("Nombre_estancia, type: " + type(Nombre_estancia) + ", value: " + Nombre_estancia);
                console.log("Nombre_estancia_campo, type: " + type(Nombre_estancia_campo) + ", value: " + Nombre_estancia_campo);
            }
        }


        for (var i = 0; i < array_nodos_animales.length; i++) {

            // Variables nodos
            var Payload_ID, Gateway, Nodo, Alt, Hdop, Latitud, Longitud, Device_ID, Numeracion, Datetime_Fin;

            // Variables animales
            var Animal_ID, Caravana_MGAP_ID, Chirpstack_Nodo_ID, Sexo_MH, Tipo_animal, Edad, Categoria, Raza;

            // Datos de payload
            if (array_nodos_animales[i].item1 != null) {
                Payload_ID = check_nullValues(array_nodos_animales[i].item1.payload_ID);
                Gateway = check_nullValues(array_nodos_animales[i].item1.applicationName);
                Nodo = check_nullValues(array_nodos_animales[i].item1.deviceName);
                Alt = check_nullValues(array_nodos_animales[i].item1.alt);
                Hdop = check_nullValues(array_nodos_animales[i].item1.hdop);
                Latitud = check_nullValues(array_nodos_animales[i].item1.latitud);
                Longitud = check_nullValues(array_nodos_animales[i].item1.longitud);
                Device_ID = check_nullValues(array_nodos_animales[i].item1.device_ID);
                Numeracion = check_nullValues(array_nodos_animales[i].item1.numeracion);

                Datetime_Fin = moment(check_nullValues(array_nodos_animales[i].item1.datetime_Fin), "YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY HH:mm:ss");

                console.log("");
                console.log("DATOS NODO");
                console.log("Nodo: " + (i + 1));
                console.log("Payload_ID, type: " + type(Payload_ID) + ", value: " + Payload_ID);
                console.log("Datetime_Fin, type: " + type(Datetime_Fin) + ", value: " + Datetime_Fin);
                console.log("Gateway, type: " + type(Gateway) + ", value: " + Gateway);
                console.log("Nodo, type: " + type(Nodo) + ", value: " + Nodo);
                console.log("Alt, type: " + type(Alt) + ", value: " + Alt);
                console.log("Hdop, type: " + type(Hdop) + ", value: " + Hdop);
                console.log("Latitud, type: " + type(Latitud) + ", value: " + Latitud);
                console.log("Longitud, type: " + type(Longitud) + ", value: " + Longitud);
                console.log("Device_ID, type: " + type(Device_ID) + ", value: " + Device_ID);
                console.log("Numeracion, type: " + type(Numeracion) + ", value: " + Numeracion);
            }

            if (isModoCompleto) {

                // Datos del animal
                if (array_nodos_animales[i].item2 != null) {
                    Animal_ID = check_nullValues(array_nodos_animales[i].item2.animal_ID);
                    Caravana_MGAP_ID = check_nullValues(array_nodos_animales[i].item2.MGAP_Tag_ID);
                    Chirpstack_Nodo_ID = check_nullValues(array_nodos_animales[i].item2.chirpstack_Nodo_ID);
                    Sexo_MH = check_nullValues(array_nodos_animales[i].item2.gender_MF);
                    Tipo_animal = check_nullValues(array_nodos_animales[i].item2.animal_type);
                    Edad = check_nullValues(array_nodos_animales[i].item2.age);
                    Categoria = check_nullValues(array_nodos_animales[i].item2.category);
                    Raza = check_nullValues(array_nodos_animales[i].item2.breed);

                    console.log("");
                    console.log("DATOS ANIMAL");
                    console.log("Animal_ID, type: " + type(Animal_ID) + ", value: " + Animal_ID);
                    console.log("Caravana_MGAP_ID, type: " + type(Caravana_MGAP_ID) + ", value: " + Caravana_MGAP_ID);
                    console.log("Chirpstack_Nodo_ID, type: " + type(Chirpstack_Nodo_ID) + ", value: " + Chirpstack_Nodo_ID);
                    console.log("Sexo_MH, type: " + type(Sexo_MH) + ", value: " + Sexo_MH);
                    console.log("Tipo_animal, type: " + type(Tipo_animal) + ", value: " + Tipo_animal);
                    console.log("Edad, type: " + type(Edad) + ", value: " + Edad);
                    console.log("Categoria, type: " + type(Categoria) + ", value: " + Categoria);
                    console.log("Raza, type: " + type(Raza) + ", value: " + Raza);
                }

                console.log("---------------------------- Fin Modo completo");
            }

            if (Latitud !== "" || Longitud !== "") {
                var nodo_posicion = { lat: TryParseFloat(Latitud, 0), lng: TryParseFloat(Longitud, 0) };
                var nodo_info = { Payload_ID: Payload_ID, Device_ID: Device_ID, Datetime_Fin: Datetime_Fin, Gateway: Gateway, Device_Name: Nodo, Alt: Alt, Hdop: Hdop, Latitud: Latitud, Longitud: Longitud, Numeracion: Numeracion };

                var animal_info = null;
                var cliente_info = null;

                if (isModoCompleto) {
                    animal_info = {
                        Animal_ID: Animal_ID, Caravana_MGAP_ID: Caravana_MGAP_ID, Chirpstack_Nodo_ID: Chirpstack_Nodo_ID, Sexo_MH: Sexo_MH, Tipo_animal: Tipo_animal, Edad: Edad, Categoria: Categoria, Raza: Raza
                    };
                    cliente_info = { Cliente_ID: Landlord_ID, Land_ID: Land_ID, Land_farm_ID: Land_farm_ID, Nombre_cliente: Nombre_cliente, Nombre_estancia: Nombre_estancia, Nombre_estancia_campo: Nombre_estancia_campo };
                }

                // Si es Nodo 1 ==> Localiza el mapa
                if (i === 0 && GMaps_mapa_autoCorregirPosicion) {
                    GMaps_map.setCenter(nodo_posicion);
                    GMaps_map.setZoom(18);
                }
                agregarMarcador(nodo_posicion, nodo_info, animal_info, cliente_info, isModoCompleto);
            }
        } // for

        actualizarNotificacionesAlarmas();
    }
}

// Actualizar número de notificaciones de alarmas si hubo
function actualizarNotificacionesAlarmas() {
    if (GMaps_lista_nodos_alarmas_ID != null && GMaps_lista_nodos_alarmas_ID != undefined) {
        if (GMaps_lista_nodos_alarmas_ID.length > 0) {
            $("#alarmas_tarjetas_count").text(GMaps_lista_nodos_alarmas_ID.length);
            $("#alarmas_tarjetas_count").removeClass("bg-success");
            $("#alarmas_tarjetas_count").addClass("bg-danger");
        }
    }
}

function isFullscreen(element) {
    return (
        (document.fullscreenElement ||
            document.webkitFullscreenElement ||
            document.mozFullScreenElement ||
            document.msFullscreenElement) == element
    );
}

function requestFullscreen(element) {
    if (element.requestFullscreen) {
        element.requestFullscreen();
    } else if (element.webkitRequestFullScreen) {
        element.webkitRequestFullScreen();
    } else if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.msRequestFullScreen) {
        element.msRequestFullScreen();
    }
}

function exitFullscreen() {
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
    }
}

function GMaps_exitFullscreen() {
    var elementToSendFullscreen = GMaps_map.getDiv().firstChild;
    if (elementToSendFullscreen !== null && elementToSendFullscreen !== undefined) {
        if (isFullscreen(elementToSendFullscreen)) {
            exitFullscreen();
        }
    }

}

function GMaps_goFullscreen() {
    var element = GMaps_map.getDiv();  //$("#map-container")[0];
    if (element !== null && element !== undefined) {
        if (element.requestFullscreen) {
            element.requestFullscreen();
        }
        if (element.webkitRequestFullScreen) {
            element.webkitRequestFullScreen();
        }
        if (element.mozRequestFullScreen) {
            element.mozRequestFullScreen();
        }
    }
}